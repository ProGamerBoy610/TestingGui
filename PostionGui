-- Roblox Script to Tween to MaximGun VehicleSeat with loading check
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

-- Target position
local targetPosition = Vector3.new(-428.75, 28.07, -49040.91)

-- Function to check if VehicleSeat is loaded
local function checkForVehicleSeat()
    local baseplates = workspace:FindFirstChild("Baseplates")
    if not baseplates then return nil end
    
    local finalBasePlate = baseplates:FindFirstChild("FinalBasePlate")
    if not finalBasePlate then return nil end
    
    local outlawbase = finalBasePlate:FindFirstChild("Outlawbase")
    if not outlawbase then return nil end
    
    local turretSpot = outlawbase:FindFirstChild("TurretSpot")
    if not turretSpot then return nil end
    
    local maximGun = turretSpot:FindFirstChild("MaximGun")
    if not maximGun then return nil end
    
    local vehicleSeat = maximGun:FindFirstChild("VehicleSeat")
    return vehicleSeat
end

-- Function to tween to target and check for VehicleSeat
local function tweenToTarget()
    -- Create tween info (slow movement over 10 seconds)
    local tweenInfo = TweenInfo.new(
        10, -- Duration
        Enum.EasingStyle.Linear,
        Enum.EasingDirection.InOut,
        0, -- Repeat count
        false, -- Reverse
        0 -- Delay
    )
    
    -- Create tween
    local targetCFrame = CFrame.new(targetPosition)
    local tween = TweenService:Create(humanoidRootPart, tweenInfo, {CFrame = targetCFrame})
    
    -- Start tween
    tween:Play()
    print("Tweening to target position...")
    
    -- Connection to check for VehicleSeat while tweening
    local connection
    connection = RunService.Heartbeat:Connect(function()
        local vehicleSeat = checkForVehicleSeat()
        if vehicleSeat then
            print("VehicleSeat found! Stopping tween and teleporting...")
            
            -- Stop the tween
            tween:Cancel()
            
            -- Disconnect the check
            connection:Disconnect()
            
            -- Teleport to VehicleSeat and sit
            local seatPosition = vehicleSeat.Position
            humanoidRootPart.CFrame = CFrame.new(seatPosition + Vector3.new(0, 5, 0))
            
            -- Wait a moment then sit
            wait(0.2)
            vehicleSeat:Sit(humanoid)
            
            print("Successfully teleported to and sat in MaximGun VehicleSeat!")
        end
    end)
    
    -- If tween completes without finding VehicleSeat
    tween.Completed:Connect(function()
        connection:Disconnect()
        local vehicleSeat = checkForVehicleSeat()
        if vehicleSeat then
            -- Final attempt to sit
            local seatPosition = vehicleSeat.Position
            humanoidRootPart.CFrame = CFrame.new(seatPosition + Vector3.new(0, 5, 0))
            wait(0.2)
            vehicleSeat:Sit(humanoid)
            print("Successfully teleported to and sat in MaximGun VehicleSeat!")
        else
            warn("Reached target position but VehicleSeat still not found!")
        end
    end)
end

-- Execute the function
tweenToTarget()
