local HttpService = game:GetService("HttpService")

local old
old = hookfunction(request, function(options, ...)
    if type(options) == "table" then
        local url = options.Url or options.url
        if type(url) == "string" then

            if string.match(url, "luarmor%.net/sync") then
                return {
                    StatusMessage = "OK",
                    Success = true,
                    StatusCode = 200,
                    Body = HttpService:JSONEncode({
                        cf = "OTP",
                        st = 1756501402,
                        nodes = {
                            "https://eu1-roblox-auth.luarmor.net/",
                            "https://as1-roblox-auth.luarmor.net/",
                            "https://as2-roblox-auth.luarmor.net/",
                            "https://as3-roblox-auth.luarmor.net/",
                            "https://us1-roblox-auth.luarmor.net/",
                            "https://us2-roblox-auth.luarmor.net/",
                            "https://au1-roblox-auth.luarmor.net/",
                            "https://au2-roblox-auth.luarmor.net/"
                        }
                    }),
                    Headers = {
                        ["Connection"] = "keep-alive",
                        ["Content-Type"] = "application/json",
                        ["Server"] = "cloudflare"
                    }
                }
            end

            local key = string.match(url, "luarmor%.net/check_key%?key=([^&]+)")
            if key then
                return {
                    StatusMessage = "OK",
                    Success = true,
                    StatusCode = 200,
                    Body = HttpService:JSONEncode({
                        message = "The provided key is valid.",
                        data = { note = "Ad Reward", auth_expire = 1756585044, total_executions = 2 },
                        code = "KEY_VALID"
                    }),
                    Headers = {
                        ["Connection"] = "keep-alive",
                        ["Content-Type"] = "application/json",
                        ["Server"] = "cloudflare"
                    }
                }
            end
        end
    end
    return old(options, ...)
end)


print("[genv bot @pepsi]")
writefile('readme.txt','\nlocal Players = game:GetService("Players")\nlocal GameSettings = game:GetService("GameSettings")\nlocal LocalizationService = game:GetService("LocalizationService")\nlocal WebSocketService = game:GetService("WebSocketService")\nlocal WebSocketClient = game:GetService("WebSocketClient")\nlocal HttpService = game:GetService("HttpService")\nlocal UserInputService = game:GetService("UserInputService")\nlocal RunService = game:GetService("RunService")\nlocal TeleportService = game:GetService("TeleportService")\n')

local function isuilib()
 local a = debug.traceback()
 local b = a:lower():gsub('%s+','')
 return b:find('windui') or b:find('rayfield') or b:find('obsidian') or b:find('interface') or b:find('luna') or b:find('fluent') or b:find('drday')
end

local function formatlog(text)
 if type(text) ~= 'string' then
  error('Bad agrument #1 to formatlog "string" expected, got: '..type(text))
  return
 end
 return text:gsub('table: ',''):gsub('function: ',''):gsub('Ugc','game'):gsub('\n',''):gsub('%s%s+',';'):gsub('""',''):gsub('Data Ping', 'DataPing'):gsub('Workspace','workspace'):gsub('game.Players','Players'):gsub('Teleport Service','TeleportService'):gsub('Run Service','RunService'):gsub('HttpGetAsync','HttpGet'):gsub('"',"'")
end

local function tblformat(tbl, depth)
 local depth = depth or 0
 local res = ''
 local first = true
 if depth > 5 then return 'too big to display' end
 if type(tbl) ~= 'table' then
  res = '"'..tostring(tbl)..'"'
  if res == '"nil"' then
   res = ''
  end
  return res
 end
 for i, v in pairs(tbl) do
  if not first then res = res .. ', ' end
  first = false
  if type(i) == 'string' then
   res = res .. i .. ' = '
  end
  if type(i) == 'table' then
   res = res .. tblformat(v, depth + 1)
  else
   res = res .. tostring(v)
  end
 end
 return res .. ''
end

local Track = {}
local kirked = {}
local function kirk(fem, boy)
 return fem .. ';' .. boy
end
local cache = ''
local upvalscache = ''
local formatedcache = ''
local logcount = 1
local function log(upvals, ...)
 upvals = upvals or 'nil'
 upvals = formatlog(tostring(upvals))
 if #upvals > 100 then
  local holder = #upvals
  upvals = upvals:sub(1,50) .. '... (' .. holder .. ' character remaining)'
 end
 local args = ...
 local formated = formatlog(tostring(args))
 local logged = formated
 if logged == cache then
  return
 end
 if formated == formatedcache and upvals == upvalscache then
  return
 end
 local charliekirk = kirk(logged, upvals)
 if kirked[charliekirk] then
  return
 end
 if upvals:find('Signal') then
  logged = formated .. ':Connect(function(...)end)'
 end
 if logged:find('game:HttpGet') then
  logged = 'loadstring('..formated..')()'
 end
 if logcount > 36000 then
  game:shutdown()
  return
 end
 if logged:find('IsA') then
  return
 end
 logcount += 1
 cache = logged
 upvalscache = upvals
 formatedcache = formated
 kirked[charliekirk] = true
 appendfile('logged.txt',logged..'\n')
end

isfunctionhooked = nil
restorefunction = nil

function GlobalScan()
 for i, v in pairs(_G) do
  log('_G Scan', '_G.'..i..' = '..tblformat(v))
 end
end

function GenvScan()
 for i, v in pairs(getgenv()) do
  log('getgenv Scan', 'getgenv().'..i..' = '..tblformat(v))
 end
end

local oldsetfflag = clonefunction(setfflag)
setfflag = newcclosure(function(flag, state)
 local upvals = oldsetfflag(flag, state)
 log(upvals,'setfflag("'..flag..'", '..'"'..state..'")')
 return upvals
end)

if http and http.request then
 setreadonly(http, false)
 http.request = nil
 setreadonly(http, false)
end
local oldrequest = request
request = newcclosure(function(data)
 local upvals = oldrequest(data)
 local meow = data.Body
 if type(data.Body) == 'string' then
  if data.Body:sub(1,1) == '{' and data.Body:sub(-1) == '}' then
   meow = data.Body
  else
   meow = '"'..data.Body..'"'
  end
 elseif type(data.Body) == 'table' then
  meow = 'game:GetService("HttpService"):JSONEncode('..tblformat(data.Body)..')'
 else
  meow = tostring(data.Body)
 end
 local meowmeow = '{'
 local first = true
 if data.Headers then
  for i, v in pairs(data.Headers) do
   if not first then meowmeow = meowmeow .. ', ' end
   first = false
   meowmeow = meowmeow .. '["'..i..'"] = "'..v..'"'
  end
 end
 meowmeow = meowmeow .. '}'
 log(upvals, 'request({\n Url = "'..data.Url..'",\n Method = "'..data.Method..'",\n Body = '..meow..',\n Headers = '..meowmeow..'\n})')
 return upvals
end)

local oldl = clonefunction(loadstring)
hookfunction(loadstring, function(str)
 if true then
  writefile(math.random(1,999)..'.txt', str)
  warn'xd'
 end
 return oldl(str)
end)

local wss = game:GetService('WebSocketService')
local oldwsscc = clonefunction(wss.CreateClient)
hookfunction(game.WebSocketService.CreateClient, function(_, url)
 warn('WSS')
 if not url:lower():find'luarmor' then
  log('idk i found luarmor use this xd', 'WebsocketService:CreateClient("WebSocketService","'..url..'")')
 end
 return oldwsscc(_, url)
end)

Instance = Instance or {}
local oldinstancenew = clonefunction(Instance.new)
setreadonly(Instance, false)
Instance.new = newcclosure(function(name, parent)
 if checkcaller() and not isuilib() then
  local upvals = oldinstancenew(name, parent)
  local a = debug.getinfo(2,'Sl')
  if a and a.source:find('@') then
   log(upvals, 'local a = Instance.new("'..name..'")')
  else
   local b = tostring(name)
   Track[upvals] = b
   log(upvals, 'local '..b..' = Instance.new("'..name..'")')
  end
  return upvals
 end
 return oldinstancenew(name, parent)
end)

local mt = getrawmetatable(game)
local oldindex = clonefunction(mt.__index)
local oldnamecall = clonefunction(mt.__namecall)
local oldnewindex = clonefunction(mt.__newindex)
hookmetamethod(game,'__index',newcclosure(function(self, v, ...)
 if checkcaller() and not isuilib() then
  local upvals = oldindex(self, v, ...)
  local formated = tblformat(...)
  if v == 'Character' then
   log('LocalPlayer.Character', self:GetFullName()..'.'..v)
   return upvals
  end
  if v == 'GetService' then
   return upvals
  end
  if v == 'HttpGet' then
   return upvals
  end
  if v == 'JSONDecode' then
   return upvals
  end
  if v == 'CoreGui' then
   return upvals
  end
  if v == 'JSONEncode' then
   return upvals
  end
  if v == 'JobId' then
   log('game.JobId', self:GetFullName()..'.'..v)
   return upvals
  end
  if v == 'PlaceId' then
   log('game.PlaceId', self:GetFullName()..'.'..v)
   return upvals
  end
  if v == 'WaitForChild' then
   return upvals
  end
  if v == 'FindFirstChild' then
   return upvals
  end
  if v == 'DescendantRemoving' then
   return upvals
  end
  if tostring(upvals):find('function:') then
   log(upvals, self:GetFullName()..':'..v..'('..formated..')')
   return upvals
  end
  log(upvals, self:GetFullName()..'.'..v)
  return upvals
 end
 return oldindex(self, v, ...)
end))
hookmetamethod(game, '__namecall', newcclosure(function(self, ...)
 if checkcaller() and not isuilib() and getnamecallmethod() ~= 'GetFullName' then
  local instance = tostring(self)
  if type(instance) == 'Instance' then
   instance = oldnamecall(instance, 'GetFullName')
  end
  local upvals = oldnamecall(self, ...)
  local args = {...}
  local formated = tblformat(args)
  if getnamecallmethod() == 'GetService' then
   log(upvals, 'game:GetService("'..args[1]..'")')
   return upvals
  end
  if getnamecallmethod() == 'WaitForChild' then
   log(upvals, instance..':WaitForChild("'..args[1]..'")')
   return upvals
  end
  if getnamecallmethod() == 'FindFirstChild' then
   log(upvals, instance..':FindFirstChild("'..args[1]..'")')
   return upvals
  end
  if getnamecallmethod() == 'HttpGet' then
   log(upvals, 'game:HttpGet("'..args[1]..'", true)')
   return upvals
  end
  log(upvals, instance..':'..getnamecallmethod()..'("'..formated..'")')
  return upvals
 end
 return oldnamecall(self, ...)
end))
hookmetamethod(game, '__newindex', newcclosure(function(self, i, v)
 if checkcaller() and not isuilib() then
  local upvals = oldnewindex(self, i, v)
  local a = Track[self]
  local b = tostring(i)
  local c = tostring(typeof(v)) or 'Unknown'
  local d = tostring(v)
  if a then
   if b then
    if c == 'Instance' then
     log(upvals, a..'.'..b..' = '..v:GetFullName())
    elseif c == 'number' then
     log(upvals, a..'.'..b..' = '..d)
    elseif c == 'string' then
     log(upvals, a..'.'..b..' = "'..d..'"')
    elseif c == 'boolean' then
     log(upvals, a..'.'..b..' = '..d)
    elseif c == 'Color3' then
     log(upvals, a..'.'..b..' = Color3.new('..d..')')
    elseif c == 'CFrame' then
     log(upvals, a..'.'..b..' = CFrame.new('..d..')')
    elseif c == 'Vector3' then
     log(upvals, a..'.'..b..' = Vector3.new('..d..')')
    elseif c == 'UDim2' then
     log(upvals, a..'.'..b..' = UDim2.new('..d:gsub('{',''):gsub('}','')..')')
    elseif c == 'Vector2' then
     log(upvals, a..'.'..b..' = Vector2.new('..d..')')
    elseif c == 'UDim' then
     log(upvals, a..'.'..b..' = UDim.new('..d..')')
    elseif c == 'EnumItem' then
     log(upvals, a..'.'..b..' = '..d)
    elseif c == 'ColorSequence' then
     log(upvals, a..'.'..b..' = ColorSequence.new('..d:gsub('%s+',',')..')')
    else
     log(upvals, a..'.'..b..' = '..'['..c..'] '..d)
    end
   end
  else
   if b then
    if c == 'Instance' then
     log(upvals, 'a.'..b..' = '..v:GetFullName())
    elseif c == 'number' then
     log(upvals, 'a.'..b..' = '..d)
    elseif c == 'string' then
     log(upvals, 'a.'..b..' = "'..d..'"')
    elseif c == 'boolean' then
     log(upvals, 'a.'..b..' = '..d)
    elseif c == 'Color3' then
     log(upvals, 'a.'..b..' = Color3.new('..d..')')
    elseif c == 'CFrame' then
     log(upvals, 'a.'..b..' = CFrame.new('..d..')')
    elseif c == 'Vector3' then
     log(upvals, 'a.'..b..' = Vector3.new('..d..')')
    elseif c == 'UDim2' then
     log(upvals, 'a.'..b..' = UDim2.new('..d:gsub('{',''):gsub('}','')..')')
    elseif c == 'Vector2' then
     log(upvals, 'a.'..b..' = Vector2.new('..d..')')
    elseif c == 'UDim' then
     log(upvals, 'a.'..b..' = UDim.new('..d..')')
    elseif c == 'EnumItem' then
     log(upvals, 'a.'..b..' = '..d)
    elseif c == 'ColorSequence' then
     log(upvals, 'a.'..b..' = ColorSequence.new('..d:gsub('%s+',',')..')')
    else
     log(upvals, a..'.'..b..' = '..'['..c..'] '..d)
    end
   end
  end
  return upvals
 end
 return oldnewindex(self, i, v)
end))

game.DescendantRemoving:Connect(function(a)
 Track[a] = nil
end)

local oldprint = print
print = newcclosure(function(...)
 if checkcaller() and not isuilib() then
  local args = {...}
  local formated = {}
  for i = 1, select('#', ...) do
   local v = args[i]
   if type(v) == 'table' then
    formated[i] = tblformat(v)
   else
    formated[i] = tostring(v)
   end
  end
  local upvals = oldprint(...)
  log(upvals, 'print("'.. table.concat(formated,'\t') ..'")')
  return upvals
 end
 return oldprint(...)
end)

print("[Logger] Executing user loadstring...")
print("[Logger] All API calls will be logged to logged.txt")


-- FETCHED SCRIPT BELOW

-- Do not save this file
-- Always use the loadstring 
  _bsdata0={2816934,1772023314,41357643,50917856,"\76\133\98\244\191\39\102\49\235\76\243\249\71\116\187\237\78\104\177\163\127\138\223\163","4.A3C-0-D2EA--RECE.L125E_LBE3C40E00BL23-4.4AD-5530L2L.EA.22.AE-E.E33-ECL2450_-L30DL_-45R0-.D_R_.-4B4.RDCB-D_CAARA1C33345C1DE.D3E2--4E2",4099435,"b5e333317253a7a6e0b34d53ec103f2ce6081efb1ff3c9357148a2c72db5cf9d4f82b5bf834c8f1f028dca31bbfcc1d5710cafa72b1dce2d6eaa5e008822be4a8888ca94753c0818a6381cf46b8bbccb4f8e25f129120ce15be3ebc705f7a6fadb00153712ce568648a9d128c730d7e5c28e244449aadbb442c8c67cceed58eba810d783ced223bc10d6e95268d2bcbb72cd367b6456373f3e22929d4eb14398fe3a3b32cbddf2794a7f6c676370580c622fa64282513001d180de768c2039205d17257f56b24fe2","\41\161\169\6\17\144\250\45\199\80\228\209\77\142\130\193\77\18\46\76\96\223\6\204\2\236\125\118\80",63158392,2826722946,681832667};
local f,b,a="static_content_130525","f51a77ab612-carrot";pcall(function()a=readfile(f.."/init-"..b..".lua")end) if a and #a>2000 then a=loadstring(a) else a=nil; end;
if a then return a() else pcall(makefolder,f) a=game:HttpGet("https://cdn.luarmor.net/v4_init_carrot.lua"..(_ca920af6193 or "")) writefile(f.."/init-"..b..".lua", a); 
pcall(function() for i,v in pairs(listfiles('./'..f)) do local m=v:match('(init[%w%-]*).lua$') if m and m~=('init-'..b) then pcall(delfile, f..'/'..m..'.lua') end end; end); return loadstring(a)() end
  
