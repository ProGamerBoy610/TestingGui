-- Roblox Fruit Stealer GUI Script (Professional Blue + Black Theme)

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "FruitStealerGUI"
screenGui.Parent = playerGui
screenGui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 700, 0, 350)
mainFrame.Position = UDim2.new(0.5, -350, 0.5, -175)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui
mainFrame.Active = true
mainFrame.Draggable = true

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 15)
corner.Parent = mainFrame

local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 50)
titleBar.Position = UDim2.new(0, 0, 0, 0)
titleBar.BackgroundColor3 = Color3.fromRGB(20, 40, 80)
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 15)
titleCorner.Parent = titleBar

local titleText = Instance.new("TextLabel")
titleText.Name = "TitleText"
titleText.Size = UDim2.new(1, 0, 1, 0)
titleText.Position = UDim2.new(0, 20, 0, 0)
titleText.BackgroundTransparency = 1
titleText.Text = "Fruit Stealer Utility"
titleText.TextColor3 = Color3.fromRGB(255, 255, 255)
titleText.TextScaled = true
titleText.TextXAlignment = Enum.TextXAlignment.Left
titleText.Font = Enum.Font.SourceSansBold
titleText.Parent = titleBar

local leftPanel = Instance.new("Frame")
leftPanel.Name = "LeftPanel"
leftPanel.Size = UDim2.new(0, 220, 1, -60)
leftPanel.Position = UDim2.new(0, 10, 0, 60)
leftPanel.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
leftPanel.BorderSizePixel = 0
leftPanel.Parent = mainFrame

local leftCorner = Instance.new("UICorner")
leftCorner.CornerRadius = UDim.new(0, 10)
leftCorner.Parent = leftPanel

local playerLabel = Instance.new("TextLabel")
playerLabel.Name = "PlayerLabel"
playerLabel.Size = UDim2.new(1, -20, 0, 30)
playerLabel.Position = UDim2.new(0, 10, 0, 10)
playerLabel.BackgroundTransparency = 1
playerLabel.Text = "Select Player"
playerLabel.TextColor3 = Color3.fromRGB(150, 200, 255)
playerLabel.TextScaled = true
playerLabel.TextXAlignment = Enum.TextXAlignment.Left
playerLabel.Font = Enum.Font.SourceSansBold
playerLabel.Parent = leftPanel

local playerDropdown = Instance.new("TextButton")
playerDropdown.Name = "PlayerDropdown"
playerDropdown.Size = UDim2.new(1, -20, 0, 35)
playerDropdown.Position = UDim2.new(0, 10, 0, 45)
playerDropdown.BackgroundColor3 = Color3.fromRGB(50, 60, 80)
playerDropdown.BorderSizePixel = 0
playerDropdown.Text = "Loading..."
playerDropdown.TextColor3 = Color3.fromRGB(255, 255, 255)
playerDropdown.TextScaled = true
playerDropdown.Font = Enum.Font.SourceSans
playerDropdown.Parent = leftPanel

local dropdownCorner = Instance.new("UICorner")
dropdownCorner.CornerRadius = UDim.new(0, 8)
dropdownCorner.Parent = playerDropdown

local playerList = Instance.new("ScrollingFrame")
playerList.Name = "PlayerList"
playerList.Size = UDim2.new(1, -20, 0, 150)
playerList.Position = UDim2.new(0, 10, 0, 85)
playerList.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
playerList.BorderSizePixel = 0
playerList.ScrollBarThickness = 6
playerList.Visible = false
playerList.Parent = leftPanel

local listCorner = Instance.new("UICorner")
listCorner.CornerRadius = UDim.new(0, 8)
listCorner.Parent = playerList

local listLayout = Instance.new("UIListLayout")
listLayout.SortOrder = Enum.SortOrder.Name
listLayout.Padding = UDim.new(0, 2)
listLayout.Parent = playerList

local refreshButton = Instance.new("TextButton")
refreshButton.Name = "RefreshButton"
refreshButton.Size = UDim2.new(1, -20, 0, 35)
refreshButton.Position = UDim2.new(0, 10, 1, -45)
refreshButton.BackgroundColor3 = Color3.fromRGB(80, 120, 200)
refreshButton.BorderSizePixel = 0
refreshButton.Text = "Refresh"
refreshButton.TextColor3 = Color3.fromRGB(255, 255, 255)
refreshButton.TextScaled = true
refreshButton.Font = Enum.Font.SourceSansBold
refreshButton.Parent = leftPanel

local refreshCorner = Instance.new("UICorner")
refreshCorner.CornerRadius = UDim.new(0, 8)
refreshCorner.Parent = refreshButton

-- FUNCTIONALITY --

local currentSelectedPlayer = nil
local dropdownOpen = false

local function createPlayerOption(targetPlayer)
    local option = Instance.new("TextButton")
    option.Name = "Option_" .. targetPlayer.Name
    option.Size = UDim2.new(1, -8, 0, 30)
    option.BackgroundColor3 = Color3.fromRGB(50, 60, 80)
    option.BorderSizePixel = 0
    option.Text = targetPlayer.Name
    option.TextColor3 = Color3.fromRGB(255, 255, 255)
    option.TextScaled = true
    option.TextXAlignment = Enum.TextXAlignment.Left
    option.Font = Enum.Font.SourceSans
    option.Parent = playerList
    
    local optionCorner = Instance.new("UICorner")
    optionCorner.CornerRadius = UDim.new(0, 6)
    optionCorner.Parent = option
    
    option.MouseButton1Click:Connect(function()
        currentSelectedPlayer = targetPlayer
        playerDropdown.Text = targetPlayer.Name
        refreshItems()
        playerList.Visible = false
        dropdownOpen = false
    end)
end

function refreshPlayerList()
    for _, child in ipairs(playerList:GetChildren()) do
        if child:IsA("TextButton") then child:Destroy() end
    end

    local players = Players:GetPlayers()
    for _, p in ipairs(players) do
        if p ~= player then
            createPlayerOption(p)
        end
    end

    playerList.CanvasSize = UDim2.new(0, 0, 0, #players * 32)
    if #players > 1 then
        playerDropdown.Text = "Select Player"
    else
        playerDropdown.Text = "No other players"
    end
end

local rightPanel = Instance.new("Frame")
rightPanel.Name = "RightPanel"
rightPanel.Size = UDim2.new(1, -250, 1, -60)
rightPanel.Position = UDim2.new(0, 240, 0, 60)
rightPanel.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
rightPanel.BorderSizePixel = 0
rightPanel.Parent = mainFrame

local rightCorner = Instance.new("UICorner")
rightCorner.CornerRadius = UDim.new(0, 10)
rightCorner.Parent = rightPanel

local itemsTitle = Instance.new("TextLabel")
itemsTitle.Name = "ItemsTitle"
itemsTitle.Size = UDim2.new(1, 0, 0, 40)
itemsTitle.Position = UDim2.new(0, 0, 0, 0)
itemsTitle.BackgroundColor3 = Color3.fromRGB(40, 60, 100)
itemsTitle.Text = "Target Inventory"
itemsTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
itemsTitle.TextScaled = true
itemsTitle.Font = Enum.Font.SourceSansBold
itemsTitle.Parent = rightPanel

local itemsScrollFrame = Instance.new("ScrollingFrame")
itemsScrollFrame.Name = "ItemsScrollFrame"
itemsScrollFrame.Size = UDim2.new(1, -10, 1, -90)
itemsScrollFrame.Position = UDim2.new(0, 5, 0, 45)
itemsScrollFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
itemsScrollFrame.BorderSizePixel = 0
itemsScrollFrame.ScrollBarThickness = 8
itemsScrollFrame.Parent = rightPanel

local itemsListLayout = Instance.new("UIListLayout")
itemsListLayout.SortOrder = Enum.SortOrder.Name
itemsListLayout.Padding = UDim.new(0, 3)
itemsListLayout.Parent = itemsScrollFrame

local function refreshItems()
    for _, child in ipairs(itemsScrollFrame:GetChildren()) do
        if child:IsA("Frame") then child:Destroy() end
    end

    if not currentSelectedPlayer then return end

    local backpack = currentSelectedPlayer:FindFirstChild("Backpack")
    if not backpack then return end

    for _, item in ipairs(backpack:GetChildren()) do
        if item:IsA("Tool") then
            local frame = Instance.new("Frame")
            frame.Size = UDim2.new(1, -16, 0, 50)
            frame.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
            frame.BorderSizePixel = 0
            frame.Parent = itemsScrollFrame

            local nameLabel = Instance.new("TextLabel")
            nameLabel.Size = UDim2.new(1, -80, 1, 0)
            nameLabel.Position = UDim2.new(0, 10, 0, 0)
            nameLabel.BackgroundTransparency = 1
            nameLabel.Text = item.Name
            nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            nameLabel.TextScaled = true
            nameLabel.TextXAlignment = Enum.TextXAlignment.Left
            nameLabel.Font = Enum.Font.SourceSans
            nameLabel.Parent = frame

            local stealButton = Instance.new("TextButton")
            stealButton.Size = UDim2.new(0, 70, 0, 30)
            stealButton.Position = UDim2.new(1, -80, 0.5, -15)
            stealButton.BackgroundColor3 = Color3.fromRGB(60, 140, 220)
            stealButton.Text = "Steal"
            stealButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            stealButton.TextScaled = true
            stealButton.Font = Enum.Font.SourceSansBold
            stealButton.Parent = frame

            stealButton.MouseButton1Click:Connect(function()
                pcall(function()
                    item:Clone().Parent = player.Backpack
                end)
            end)
        end
    end
end

local stealAllButton = Instance.new("TextButton")
stealAllButton.Size = UDim2.new(1, -10, 0, 35)
stealAllButton.Position = UDim2.new(0, 5, 1, -40)
stealAllButton.BackgroundColor3 = Color3.fromRGB(60, 180, 120)
stealAllButton.Text = "Steal All"
stealAllButton.TextColor3 = Color3.fromRGB(255, 255, 255)
stealAllButton.TextScaled = true
stealAllButton.Font = Enum.Font.SourceSansBold
stealAllButton.Parent = rightPanel

stealAllButton.MouseButton1Click:Connect(function()
    if not currentSelectedPlayer then return end
    local backpack = currentSelectedPlayer:FindFirstChild("Backpack")
    if not backpack then return end

    for _, item in ipairs(backpack:GetChildren()) do
        if item:IsA("Tool") then
            pcall(function()
                item:Clone().Parent = player.Backpack
            end)
        end
    end
end)

refreshButton.MouseButton1Click:Connect(refreshPlayerList)
playerDropdown.MouseButton1Click:Connect(function()
    dropdownOpen = not dropdownOpen
    playerList.Visible = dropdownOpen
end)

refreshPlayerList()

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.F3 then
        mainFrame.Visible = not mainFrame.Visible
    end
end)
