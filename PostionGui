-- Forge Auto Farm Script with Wind UI - Enhanced System

local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()

-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")

local LocalPlayer = Players.LocalPlayer

WindUI:SetNotificationLower(true)

-- Add Custom Blue Theme
WindUI:AddTheme({
    Name = "Blue Theme",
    Accent = Color3.fromRGB(37, 99, 235),
    Dialog = Color3.fromRGB(15, 23, 42),
    Outline = Color3.fromRGB(59, 130, 246),
    Text = Color3.fromRGB(248, 250, 252),
    Placeholder = Color3.fromRGB(100, 116, 139),
    Background = Color3.fromRGB(15, 23, 42),
    Button = Color3.fromRGB(30, 58, 138),
    Icon = Color3.fromRGB(147, 197, 253)
})

-- Create Main Window
local Window = WindUI:CreateWindow({
    Title = "Fryzer Hub",
    Author = "Join Discord",
    Folder = "FryzerHub",
    Size = UDim2.fromOffset(580, 460),
    MinSize = Vector2.new(560, 350),
    MaxSize = Vector2.new(850, 560),
    Transparent = true,
    Theme = "Blue Theme",
    Resizable = true,
    SideBarWidth = 200,
    BackgroundImageTransparency = 0.42,
    HideSearchBar = false,
    ScrollBarEnabled = true,
})

-- Edit Open Button
Window:EditOpenButton({
    Title = "Fryzer Hub",
    Icon = "",
    CornerRadius = UDim.new(0, 16),
    StrokeThickness = 2,
    Color = ColorSequence.new(
        Color3.fromHex("#1e3a8a"),
        Color3.fromHex("#3b82f6")
    ),
    OnlyMobile = false,
    Enabled = true,
    Draggable = true,
})

-- Add Version Tag
Window:Tag({
    Title = "v4.5",
    Color = Color3.fromHex("#3b82f6"),
    Radius = 8,
})
Window:Tag({
    Title = "The Forge",
    Color = Color3.fromHex("#fa0000"),
    Radius = 8,
})

-- ==================== PLAYER INFORMATION SECTION ====================

local InfoTab = Window:Tab({
    Title = "Info",
    Icon = "info",
    Locked = false,
})

InfoTab:Select()

local Sectiontest = InfoTab:Section({
    Title = "Player Information Dashboard",
    Icon = "user-check",
})

InfoTab:Paragraph({
    Title = "Player Information Dashboard",
    Desc = "Complete player details, game information, and community access",
    Color = "Blue",
    Image = "",
    ImageSize = 30,
    Thumbnail = "",
    ThumbnailSize = 80,
    Locked = false,
    Buttons = {}
})

local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local Player = Players.LocalPlayer
local PlayerName = Player.DisplayName ~= "" and Player.DisplayName or Player.Name
local AccountAge = Player.AccountAge
local GameName = "Unknown Game"
pcall(function()
    GameName = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
end)

InfoTab:Paragraph({
    Title = "üë§ " .. PlayerName,
    Desc = string.format(
        "üè∑Ô∏è Username: @%s\nüéÇ Account Age: %d days\nüÜî User ID: %d\nüéÆ Current Game: %s\nüë• Server: %d/%d players\nüìç Region: %s",
        Player.Name, AccountAge, Player.UserId, GameName,
        #Players:GetPlayers(), Players.MaxPlayers,
        game:GetService("LocalizationService").RobloxLocaleId
    ),
    Color = "Blue",
    Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. Player.UserId .. "&width=150&height=150&format=png",
    ImageSize = 52,
    Thumbnail = "",
    ThumbnailSize = 80,
    Locked = false,
    Buttons = {}
})

InfoTab:Divider()

-- ==================== DISCORD COMMUNITY SECTION ====================
local DiscordSection = InfoTab:Section({
    Title = "Join Our Discord Community",
    Icon = "users",
})

InfoTab:Paragraph({
    Title = "üéÆ Connect & Engage",
    Desc = "Join thousands of players in our Discord community for updates, support, and exclusive content!",
    Color = "Blue",
    Image = "",
    ImageSize = 30,
    Thumbnail = "",
    ThumbnailSize = 80,
    Locked = false,
    Buttons = {}
})

-- Discord API Configuration
local InviteCode = "UKYHGddQD3"
local DiscordAPI = "https://discord.com/api/v10/invites/" .. InviteCode .. "?with_counts=true&with_expiration=true"

-- Universal HTTP Request Handler
local function HttpRequest(data)
    if syn and syn.request then
        return syn.request(data)
    elseif http and http.request then
        return http.request(data)
    elseif http_request then
        return http_request(data)
    elseif request then
        return request(data)
    else
        error("Your executor does not support HTTP requests.")
    end
end

local DiscordResponse
local DiscordErrorMessage = nil
local DiscordInfoParagraph

-- Fetch Discord Information
xpcall(function()
    local req = HttpRequest({
        Url = DiscordAPI,
        Method = "GET",
        Headers = {
            ["Accept"] = "application/json"
        }
    })

    if req and req.Body then
        DiscordResponse = HttpService:JSONDecode(req.Body)
    else
        error("Invalid response from Discord API.")
    end
end, function(err)
    warn("Error fetching Discord info: " .. tostring(err))
    DiscordErrorMessage = tostring(err)
    DiscordResponse = nil
end)

-- Display Discord Information
if DiscordResponse and DiscordResponse.guild then
    local guildName = DiscordResponse.guild.name or "Unknown Server"
    local memberCount = DiscordResponse.approximate_member_count or 0
    local onlineCount = DiscordResponse.approximate_presence_count or 0
    
    local ParagraphConfig = {
        Title = "üî∑ " .. guildName,
        Desc = 
            'üìä <font color="#3b82f6"><b>Members:</b></font> ' .. tostring(memberCount) ..
            '\nüü¢ <font color="#10b981"><b>Online:</b></font> ' .. tostring(onlineCount) ..
            '\nüìà <font color="#f59e0b"><b>Activity:</b></font> ' .. math.floor((onlineCount / math.max(memberCount, 1)) * 100) .. '% active',
        Color = "Red",
        ImageSize = 52,
        Buttons = {
            {
                Icon = "link",
                Title = "Copy Invite",
                Callback = function()
                    pcall(function()
                        setclipboard("https://discord.gg/" .. InviteCode)
                        WindUI:Notify({
                            Title = "‚úÖ Copied!",
                            Content = "Discord invite copied to clipboard.",
                            Duration = 3,
                            Icon = "copy",
                        })
                    end)
                end
            },
            {
                Icon = "refresh-cw",
                Title = "Update Stats",
                Callback = function()
                    xpcall(function()
                        local upd = HttpRequest({
                            Url = DiscordAPI,
                            Method = "GET",
                            Headers = {
                                ["Accept"] = "application/json"
                            }
                        })
                        if upd and upd.Body then
                            local UpdatedResponse = HttpService:JSONDecode(upd.Body)
                            if UpdatedResponse and UpdatedResponse.guild then
                                local newMembers = UpdatedResponse.approximate_member_count or 0
                                local newOnline = UpdatedResponse.approximate_presence_count or 0
                                local activity = math.floor((newOnline / math.max(newMembers, 1)) * 100)
                                
                                DiscordInfoParagraph:SetDesc(
                                    'üìä <font color="#3b82f6"><b>Members:</b></font> ' .. tostring(newMembers) ..
                                    '\nüü¢ <font color="#10b981"><b>Online:</b></font> ' .. tostring(newOnline) ..
                                    '\nüìà <font color="#f59e0b"><b>Activity:</b></font> ' .. activity .. '% active'
                                )
                                WindUI:Notify({
                                    Title = "üîÑ Updated!",
                                    Content = "Discord stats refreshed successfully.",
                                    Duration = 2,
                                    Icon = "check",
                                })
                            end
                        end
                    end, function(err)
                        warn("Error updating Discord info: " .. tostring(err))
                        WindUI:Notify({
                            Title = "‚ö†Ô∏è Update Failed",
                            Content = "Could not refresh Discord stats.",
                            Duration = 3,
                            Icon = "alert-circle",
                        })
                    end)
                end
            }
        }
    }

    -- Add guild icon if available
    if DiscordResponse.guild.icon then
        ParagraphConfig.Image = "https://cdn.discordapp.com/icons/" .. DiscordResponse.guild.id .. "/" .. DiscordResponse.guild.icon .. ".png?size=256"
    end

    -- Add banner if available
    if DiscordResponse.guild.banner then
        ParagraphConfig.Thumbnail = "https://cdn.discordapp.com/banners/" .. DiscordResponse.guild.id .. "/" .. DiscordResponse.guild.banner .. ".png?size=512"
        ParagraphConfig.ThumbnailSize = 80
    end

    DiscordInfoParagraph = InfoTab:Paragraph(ParagraphConfig)
else
    InfoTab:Paragraph({
        Title = "‚ö†Ô∏è Discord Info Unavailable",
        Desc = DiscordErrorMessage or "Unable to fetch Discord server information. Try again later!",
        Color = "Blue",
        ImageSize = 26,
    })
end

-- Quick Action Button
InfoTab:Button({
    Title = "üìã Copy Discord Link",
    Desc = "Copy invite link to clipboard",
    Locked = false,
    Callback = function()
        setclipboard("https://discord.gg/" .. InviteCode)
        WindUI:Notify({
            Title = "‚úÖ Link Copied!",
            Content = "Discord invite copied to clipboard",
            Duration = 3,
            Icon = "copy",
        })
    end
})

InfoTab:Space()

-- ==================== TAB 2: PLAYER ====================
local PlayerTab = Window:Tab({
    Title = "Player",
    Icon = "user-check",
    Locked = false,
})

local Section3 = PlayerTab:Section({
    Title = "Player Controls",
    Icon = "user-check",
})

PlayerTab:Paragraph({
    Title = "Player Controls",
    Desc = "Use the buttons below to control your player character",
    Color = "Blue",
    Image = "",
    ImageSize = 30,
    Thumbnail = "",
    ThumbnailSize = 80,
    Locked = false,
    Buttons = {}
})

PlayerTab:Divider()

local Section4 = PlayerTab:Section({
    Title = "Movement System",
    Icon = "zap",
    Opened = true,
})

-- Infinite Jump Toggle
local infiniteJumpEnabled = false
local UserInputService = game:GetService("UserInputService")

PlayerTab:Toggle({
    Title = "Infinite Jump",
    Desc = "Press Space to jump infinitely",
    Icon = "arrow-up",
    Type = "Checkbox",
    Default = false,
    Callback = function(state)
        infiniteJumpEnabled = state
        WindUI:Notify({
            Title = state and "Infinite Jump Enabled! üöÄ" or "Infinite Jump Disabled!",
            Content = state and "Press Space to jump infinitely" or "Jump mechanics restored to normal",
            Duration = 3,
        })
    end
})

UserInputService.JumpRequest:Connect(function()
    if infiniteJumpEnabled and Player.Character and Player.Character:FindFirstChild("Humanoid") then
        local humanoid = Player.Character.Humanoid
        if humanoid:GetState() ~= Enum.HumanoidStateType.Dead then
            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end
end)

local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local ActiveSpeedBoost = false
local ActiveJumpBoost = false
local ActiveNoclip = false
local ActiveInstantPrompts = false
local ValueSpeed = 16
local ValueJumpHeight = 7.2
local OldSpeed = 16
local OldJumpHeight = 7.2

local function getCharacter()
    return LocalPlayer.Character
end

local function getHumanoid()
    local character = getCharacter()
    return character and character:FindFirstChildOfClass("Humanoid")
end

local function updateOriginalValues()
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        OldSpeed = LocalPlayer.Character.Humanoid.WalkSpeed
        OldJumpHeight = LocalPlayer.Character.Humanoid.JumpHeight or 7.2
    end
end

updateOriginalValues()
LocalPlayer.CharacterAdded:Connect(updateOriginalValues)



PlayerTab:Divider()

-- Speed Controls
PlayerTab:Slider({
    Title = "Walk Speed Setting",
    Step = 1,
    Value = {
        Min = 16,
        Max = 500,
        Default = 16,
    },
    Callback = function(value)
        ValueSpeed = value
        print("üèÉ Walk speed set to: " .. value)
    end
})

PlayerTab:Toggle({
    Title = "Enable Speed Boost",
    Desc = "Boost your walking speed",
    Icon = "zap",
    Type = "Checkbox",
    Default = false,
    Callback = function(state)
        ActiveSpeedBoost = state
        
        task.spawn(function()
            while ActiveSpeedBoost do
                if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                    LocalPlayer.Character.Humanoid.WalkSpeed = ValueSpeed
                end
                task.wait(0.1)
            end
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                LocalPlayer.Character.Humanoid.WalkSpeed = OldSpeed
            end
        end)
        
        print("üèÉ Speed Boost: " .. (state and "ON" or "OFF"))
    end
})

PlayerTab:Divider()

-- Jump Controls
PlayerTab:Slider({
    Title = "Jump Height Setting",
    Step = 1,
    Value = {
        Min = 7,
        Max = 200,
        Default = 50,
    },
    Callback = function(value)
        ValueJumpHeight = value
        print("ü¶ò Jump height set to: " .. value)
    end
})

PlayerTab:Toggle({
    Title = "Enable Jump Boost",
    Desc = "Increase your jump height",
    Icon = "move-up",
    Type = "Checkbox",
    Default = false,
    Callback = function(state)
        ActiveJumpBoost = state
        
        task.spawn(function()
            while ActiveJumpBoost do
                if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                    local humanoid = LocalPlayer.Character.Humanoid
                    humanoid.UseJumpPower = false
                    humanoid.JumpHeight = ValueJumpHeight
                end
                task.wait(0.1)
            end
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                local humanoid = LocalPlayer.Character.Humanoid
                humanoid.JumpHeight = 7.2
            end
        end)
        
        print("ü¶ò Jump Boost: " .. (state and "ON" or "OFF"))
    end
})

PlayerTab:Divider()

PlayerTab:Space()

-- Fly System
local IYMouse = Players.LocalPlayer:GetMouse()
local FLYING = false
local QEfly = true
local iyflyspeed = 1
local vehicleflyspeed = 1
local ActivateFly = false

local function sFLY(vfly)
    repeat task.wait() until Players.LocalPlayer and Players.LocalPlayer.Character and Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart") and Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    repeat task.wait() until IYMouse
    if flyKeyDown or flyKeyUp then flyKeyDown:Disconnect() flyKeyUp:Disconnect() end

    local T = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
    local CONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
    local lCONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
    local SPEED = 0

    local function FLY()
        FLYING = true
        local BG = Instance.new('BodyGyro')
        local BV = Instance.new('BodyVelocity')
        BG.P = 9e4
        BG.Parent = T
        BV.Parent = T
        BG.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
        BG.CFrame = T.CFrame
        BV.Velocity = Vector3.new(0, 0, 0)
        BV.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        task.spawn(function()
            repeat task.wait()
                if not vfly and Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid') then
                    Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid').PlatformStand = true
                end
                if CONTROL.L + CONTROL.R ~= 0 or CONTROL.F + CONTROL.B ~= 0 or CONTROL.Q + CONTROL.E ~= 0 then
                    SPEED = 50
                elseif not (CONTROL.L + CONTROL.R ~= 0 or CONTROL.F + CONTROL.B ~= 0 or CONTROL.Q + CONTROL.E ~= 0) and SPEED ~= 0 then
                    SPEED = 0
                end
                if (CONTROL.L + CONTROL.R) ~= 0 or (CONTROL.F + CONTROL.B) ~= 0 or (CONTROL.Q + CONTROL.E) ~= 0 then
                    BV.Velocity = ((workspace.CurrentCamera.CoordinateFrame.lookVector * (CONTROL.F + CONTROL.B)) + ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(CONTROL.L + CONTROL.R, (CONTROL.F + CONTROL.B + CONTROL.Q + CONTROL.E) * 0.2, 0).p) - workspace.CurrentCamera.CoordinateFrame.p)) * SPEED
                    lCONTROL = {F = CONTROL.F, B = CONTROL.B, L = CONTROL.L, R = CONTROL.R}
                elseif (CONTROL.L + CONTROL.R) == 0 and (CONTROL.F + CONTROL.B) == 0 and (CONTROL.Q + CONTROL.E) == 0 and SPEED ~= 0 then
                    BV.Velocity = ((workspace.CurrentCamera.CoordinateFrame.lookVector * (lCONTROL.F + lCONTROL.B)) + ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(lCONTROL.L + lCONTROL.R, (lCONTROL.F + lCONTROL.B + CONTROL.Q + CONTROL.E) * 0.2, 0).p) - workspace.CurrentCamera.CoordinateFrame.p)) * SPEED
                else
                    BV.Velocity = Vector3.new(0, 0, 0)
                end
                BG.CFrame = workspace.CurrentCamera.CoordinateFrame
            until not FLYING
            CONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
            lCONTROL = {F = 0, B = 0, L = 0, R = 0, Q = 0, E = 0}
            SPEED = 0
            BG:Destroy()
            BV:Destroy()
            if Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid') then
                Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid').PlatformStand = false
            end
        end)
    end
    flyKeyDown = IYMouse.KeyDown:Connect(function(KEY)
        if KEY:lower() == 'w' then
            CONTROL.F = (vfly and vehicleflyspeed or iyflyspeed)
        elseif KEY:lower() == 's' then
            CONTROL.B = - (vfly and vehicleflyspeed or iyflyspeed)
        elseif KEY:lower() == 'a' then
            CONTROL.L = - (vfly and vehicleflyspeed or iyflyspeed)
        elseif KEY:lower() == 'd' then 
            CONTROL.R = (vfly and vehicleflyspeed or iyflyspeed)
        elseif QEfly and KEY:lower() == 'e' then
            CONTROL.Q = (vfly and vehicleflyspeed or iyflyspeed)*2
        elseif QEfly and KEY:lower() == 'q' then
            CONTROL.E = -(vfly and vehicleflyspeed or iyflyspeed)*2
        end
        pcall(function() workspace.CurrentCamera.CameraType = Enum.CameraType.Track end)
    end)
    flyKeyUp = IYMouse.KeyUp:Connect(function(KEY)
        if KEY:lower() == 'w' then
            CONTROL.F = 0
        elseif KEY:lower() == 's' then
            CONTROL.B = 0
        elseif KEY:lower() == 'a' then
            CONTROL.L = 0
        elseif KEY:lower() == 'd' then
            CONTROL.R = 0
        elseif KEY:lower() == 'e' then
            CONTROL.Q = 0
        elseif KEY:lower() == 'q' then
            CONTROL.E = 0
        end
    end)
    FLY()
end

local function NOFLY()
    FLYING = false
    if flyKeyDown or flyKeyUp then flyKeyDown:Disconnect() flyKeyUp:Disconnect() end
    if Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid') then
        Players.LocalPlayer.Character:FindFirstChildOfClass('Humanoid').PlatformStand = false
    end
    pcall(function() workspace.CurrentCamera.CameraType = Enum.CameraType.Custom end)
end

-- Mobile Fly
local velocityHandlerName = "BodyVelocity"
local gyroHandlerName = "BodyGyro"
local mfly1
local mfly2

local function UnMobileFly()
    pcall(function()
        FLYING = false
        local root = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
        root:FindFirstChild(velocityHandlerName):Destroy()
        root:FindFirstChild(gyroHandlerName):Destroy()
        Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid").PlatformStand = false
        mfly1:Disconnect()
        mfly2:Disconnect()
    end)
end

local function MobileFly()
    UnMobileFly()
    FLYING = true

    local root = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
    local camera = workspace.CurrentCamera
    local v3none = Vector3.new()
    local v3zero = Vector3.new(0, 0, 0)
    local v3inf = Vector3.new(9e9, 9e9, 9e9)

    local controlModule = require(Players.LocalPlayer.PlayerScripts:WaitForChild("PlayerModule"):WaitForChild("ControlModule"))
    local bv = Instance.new("BodyVelocity")
    bv.Name = velocityHandlerName
    bv.Parent = root
    bv.MaxForce = v3zero
    bv.Velocity = v3zero

    local bg = Instance.new("BodyGyro")
    bg.Name = gyroHandlerName
    bg.Parent = root
    bg.MaxTorque = v3inf
    bg.P = 1000
    bg.D = 50

    mfly1 = Players.LocalPlayer.CharacterAdded:Connect(function()
        local bv = Instance.new("BodyVelocity")
        bv.Name = velocityHandlerName
        bv.Parent = root
        bv.MaxForce = v3zero
        bv.Velocity = v3zero

        local bg = Instance.new("BodyGyro")
        bg.Name = gyroHandlerName
        bg.Parent = root
        bg.MaxTorque = v3inf
        bg.P = 1000
        bg.D = 50
    end)

    mfly2 = RunService.RenderStepped:Connect(function()
        root = Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")
        camera = workspace.CurrentCamera
        if Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid") and root and root:FindFirstChild(velocityHandlerName) and root:FindFirstChild(gyroHandlerName) then
            local humanoid = Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid")
            local VelocityHandler = root:FindFirstChild(velocityHandlerName)
            local GyroHandler = root:FindFirstChild(gyroHandlerName)

            VelocityHandler.MaxForce = v3inf
            GyroHandler.MaxTorque = v3inf
            humanoid.PlatformStand = true
            GyroHandler.CFrame = camera.CoordinateFrame
            VelocityHandler.Velocity = v3none

            local direction = controlModule:GetMoveVector()
            if direction.X > 0 then
                VelocityHandler.Velocity = VelocityHandler.Velocity + camera.CFrame.RightVector * (direction.X * ((iyflyspeed) * 50))
            end
            if direction.X < 0 then
                VelocityHandler.Velocity = VelocityHandler.Velocity + camera.CFrame.RightVector * (direction.X * ((iyflyspeed) * 50))
            end
            if direction.Z > 0 then
                VelocityHandler.Velocity = VelocityHandler.Velocity - camera.CFrame.LookVector * (direction.Z * ((iyflyspeed) * 50))
            end
            if direction.Z < 0 then
                VelocityHandler.Velocity = VelocityHandler.Velocity - camera.CFrame.LookVector * (direction.Z * ((iyflyspeed) * 50))
            end
        end
    end)
end

PlayerTab:Slider({
    Title = "Fly Speed",
    Step = 0.1,
    Value = {
        Min = 0.1,
        Max = 10,
        Default = 1
    },
    Callback = function(val)
        iyflyspeed = val
    end
})

PlayerTab:Toggle({
    Title = "Fly",
    Desc = "Enable flying with WASD controls",
    Icon = "plane",
    Type = "Checkbox",
    Default = false,
    Callback = function(state)
        ActivateFly = state
        task.spawn(function()
            if not FLYING and ActivateFly then
                if UserInputService.TouchEnabled then
                    MobileFly()
                else
                    NOFLY()
                    task.wait()
                    sFLY()
                end
            elseif FLYING and not ActivateFly then
                if UserInputService.TouchEnabled then
                    UnMobileFly()
                else
                    NOFLY()
                end
            end
        end)
    end
})

PlayerTab:Space()

local MainTab = Window:Tab({
    Title = "MainFarm",
    Icon = "house"
})

local Section = MainTab:Section({
    Title = "Auto Mine",
    Icon = "pickaxe"
})

-- Global settings
_G.AutoMine = _G.AutoMine or false
_G.MineTheseOres = _G.MineTheseOres or {}
_G.TweenSpeed = _G.TweenSpeed or 67
_G.FilterByArea = _G.FilterByArea or false
_G.SelectedAreas = _G.SelectedAreas or {}
_G.MineMode = _G.MineMode or "Ores"

-- Find tool service
local ToolService
pcall(function()
    ToolService = ReplicatedStorage.Shared.Packages.Knit.Services.ToolService.RF.ToolActivated
end)

-- Rock and ore definitions
local RockOreTypes = {
    Pebble = {"Stone", "Sand Stone", "Copper", "Iron", "Poopite"},
    Rock = {"Sand Stone", "Copper", "Iron", "Tin", "Silver"},
    Boulder = {"Copper", "Iron", "Tin", "Silver", "Gold", "Platinum"}
}

local AllOres = {
    "Stone", "Sand Stone", "Copper", "Iron", "Tin", "Silver", "Gold",
    "Platinum", "Cobalt", "Titanium", "Diamond", "Ruby", "Emerald"
}

local AllRocks = {"Pebble", "Rock", "Boulder", "Basalt Rock"}

-- Helper functions
local function GetHRP()
    local char = LocalPlayer.Character
    return char and char:FindFirstChild("HumanoidRootPart")
end

local function GetRockType(rock)
    if not rock then return nil end
    
    local rockType = rock:GetAttribute("RockType")
    if rockType then return tostring(rockType) end
    
    if RockOreTypes[rock.Name] then
        return rock.Name
    end
    
    return nil
end

local function IsDesiredRock(rock)
    if not rock then return false end
    if not _G.MineTheseOres or #_G.MineTheseOres == 0 then return true end
    
    local rockType = GetRockType(rock)
    if not rockType then return false end
    
    local drops = RockOreTypes[rockType]
    if not drops then return false end
    
    for _, desired in ipairs(_G.MineTheseOres) do
        for _, drop in ipairs(drops) do
            if string.lower(drop) == string.lower(desired) then
                return true
            end
        end
    end
    
    return false
end

local function GetRockHealth(rock)
    if not rock then return nil end
    
    local health = rock:GetAttribute("Health")
    if health then return health end
    
    local part = rock:IsA("BasePart") and rock or rock:FindFirstChildWhichIsA("BasePart")
    if part then
        health = part:GetAttribute("Health")
        if health then return health end
    end
    
    return nil
end

local function FindNearestRock()
    local hrp = GetHRP()
    if not hrp then return nil end
    
    local rocksFolder = Workspace:FindFirstChild("Rocks")
    if not rocksFolder then return nil end
    
    local nearest = nil
    local minDist = math.huge
    
    for _, area in ipairs(rocksFolder:GetChildren()) do
        for _, rock in ipairs(area:GetDescendants()) do
            if rock:IsA("Model") or rock:IsA("BasePart") then
                if IsDesiredRock(rock) then
                    local health = GetRockHealth(rock)
                    if health and health > 0 then
                        local part = rock:IsA("BasePart") and rock or rock:FindFirstChildWhichIsA("BasePart")
                        if part then
                            local dist = (hrp.Position - part.Position).Magnitude
                            if dist < minDist then
                                nearest = rock
                                minDist = dist
                            end
                        end
                    end
                end
            end
        end
    end
    
    return nearest
end

local function TweenToRock(rock)
    local hrp = GetHRP()
    if not hrp or not rock then return end
    
    local part = rock:IsA("BasePart") and rock or rock:FindFirstChildWhichIsA("BasePart")
    if not part then return end
    
    local targetPos = part.Position + Vector3.new(0, 3, 0)
    local distance = (hrp.Position - targetPos).Magnitude
    local time = distance / (_G.TweenSpeed or 67)
    
    local tween = TweenService:Create(hrp, TweenInfo.new(time, Enum.EasingStyle.Linear), {
        CFrame = CFrame.new(targetPos)
    })
    
    tween:Play()
    tween.Completed:Wait()
end

local function ActivateTool()
    if ToolService then
        pcall(function()
            ToolService:InvokeServer("Pickaxe")
        end)
    end
end

-- Auto mine toggle
MainTab:Window({Title = "Master", Icon = "play"}):Toggle({
    Title = "Auto Mine (Master)",
    Desc = "Enable/disable auto-miner",
    Value = _G.AutoMine,
    Callback = function(value)
        _G.AutoMine = value
        vu2:Notify({
            Title = "Auto Mine",
            Content = value and "Enabled" or "Disabled",
            Duration = 1.5
        })
    end
})

-- Mode selection
MainTab:Window({Title = "Selection & Mode", Icon = "settings-2"}):Dropdown({
    Title = "Mine Type",
    Desc = "Choose what to mine",
    Values = {"Ores", "Rocks"},
    Value = _G.MineMode,
    Multi = false,
    Callback = function(value)
        _G.MineMode = value
        _G.MineTheseOres = {_G.MineMode == "Ores" and AllOres[1] or AllRocks[1]}
    end
})

-- Ore/Rock selection
MainTab:Window({Title = "Selection & Mode", Icon = "settings-2"}):Dropdown({
    Title = "Ore Drops",
    Desc = "Select ores to mine",
    Values = AllOres,
    Value = {},
    Multi = true,
    Callback = function(value)
        if _G.MineMode == "Ores" then
            _G.MineTheseOres = type(value) == "table" and value or {value}
        end
    end
})

-- Speed slider
MainTab:window({Title = "Options", Icon = "settings"}):Slider({
    Title = "Tween Speed",
    Desc = "Movement speed to rocks",
    Step = 1,
    Value = {Min = 1, Max = 100, Default = _G.TweenSpeed},
    Callback = function(value)
        _G.TweenSpeed = value
    end
})

-- Main mining loop
task.spawn(function()
    local currentRock = nil
    
    while true do
        task.wait(0.12)
        
        if not _G.AutoMine then
            currentRock = nil
            continue
        end
        
        local hrp = GetHRP()
        if not hrp then
            task.wait(0.4)
            continue
        end
        
        -- Check current rock
        if currentRock and currentRock.Parent then
            local health = GetRockHealth(currentRock)
            if health and health > 0 and IsDesiredRock(currentRock) then
                -- Keep mining
                ActivateTool()
                task.wait(0.05)
                continue
            end
        end
        
        -- Find new rock
        currentRock = FindNearestRock()
        
        if not currentRock then
            task.wait(0.28)
            continue
        end
        
        -- Move to rock
        TweenToRock(currentRock)
        
        -- Start mining
        while currentRock and currentRock.Parent and _G.AutoMine do
            local health = GetRockHealth(currentRock)
            if not health or health <= 0 then
                break
            end
            
            ActivateTool()
            task.wait(0.05)
        end
        
        currentRock = nil
    end
end)



local v221 = Window:Tab({
        Title = "Forge",
        Icon = "anvil"
    })
    repeat
        task.wait()
    until game:IsLoaded()
    local v222 = Players.LocalPlayer
    repeat
        task.wait()
    until v222 and v222:FindFirstChild("PlayerGui")
    local vu223 = v222:WaitForChild("PlayerGui")
    local function vu230(p224)
        local v225 = ReplicatedStorage
        local v226, v227, v228 = ipairs(p224)
        while true do
            local v229
            v228, v229 = v226(v227, v228)
            if v228 == nil then
                break
            end
            if not v225 then
                return nil
            end
            v225 = v225:FindFirstChild(v229)
        end
        return v225
    end
    local function vu240(p231)
        local v232 = ReplicatedStorage:FindFirstChild("Controllers")
        if v232 and v232:FindFirstChild("ForgeController") then
            local v233 = v232.ForgeController:FindFirstChild(p231)
            if v233 and v233:IsA("ModuleScript") then
                local v234, v235 = pcall(require, v233)
                if v234 and type(v235) == "table" then
                    return v235, v233
                end
            end
        end
        local v236 = ReplicatedStorage:FindFirstChild("Shared")
        if v236 and v236:FindFirstChild("Controllers") and v236.Controllers:FindFirstChild("ForgeController") then
            local v237 = v236.Controllers.ForgeController:FindFirstChild(p231)
            if v237 and v237:IsA("ModuleScript") then
                local v238, v239 = pcall(require, v237)
                if v238 and type(v239) == "table" then
                    return v239, v237
                end
            end
        end
        return nil, nil
    end
    local vu241 = {}
    local function vu247(pu242, pu243)
        local vu244, _ = vu240(pu242)
        if not vu244 then
            return false, "module_not_found"
        end
        if not vu241[pu242] then
            vu241[pu242] = vu244.Start
        end
        function vu244.Start()
            local v245, v246 = pcall(function()
                return pu243(vu244)
            end)
            if v245 then
                return v246
            else
                warn("Patch override error for", pu242, v246)
                if vu241[pu242] then
                    return vu241[pu242]
                else
                    return nil
                end
            end
        end
        return true
    end
    local function vu250(p248)
        local v249, _ = vu240(p248)
        if not v249 then
            return false
        end
        if not vu241[p248] then
            return false
        end
        v249.Start = vu241[p248]
        vu241[p248] = nil
        return true
    end
    local function vu254(_, _, p251)
        local vu252 = vu223:FindFirstChild("Forge")
        if vu252 and vu252:FindFirstChild("MeltMinigame") then
            pcall(function()
                vu252.MeltMinigame.Visible = true
                local vu253 = not vu252.MeltMinigame:FindFirstChild("Bar", true) and vu252.MeltMinigame.Bar
                if vu253 then
                    vu253 = vu252.MeltMinigame.Bar.Area
                end
                if vu253 and vu253:IsA("Frame") then
                    pcall(function()
                        TweenService:Create(vu253, TweenInfo.new(0.25, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
                            Size = UDim2.fromScale(1, vu253.Size.Y.Scale)
                        }):Play()
                    end)
                end
                task.wait(0.28)
                vu252.MeltMinigame.Visible = false
            end)
        else
            task.wait(0.25)
        end
        return p251 and p251.StartTime or workspace:GetServerTimeNow(), true
    end
    local function vu258(_, _, p255)
        local vu256 = vu223:FindFirstChild("Forge")
        if vu256 and vu256:FindFirstChild("PourMinigame") then
            pcall(function()
                vu256.PourMinigame.Visible = true
                local vu257 = vu256.PourMinigame.Timer
                if vu257 then
                    vu257 = vu256.PourMinigame.Timer.Bar
                end
                if vu257 and vu257:IsA("Frame") then
                    pcall(function()
                        TweenService:Create(vu257, TweenInfo.new(0.25, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
                            Size = UDim2.fromScale(1, vu257.Size.Y.Scale)
                        }):Play()
                    end)
                end
                task.wait(0.28)
                vu256.PourMinigame.Visible = false
            end)
        else
            task.wait(0.25)
        end
        return p255 and p255.StartTime or workspace:GetServerTimeNow()
    end
    v221:Button({
        Title = "Open Forge UI",
        Desc = "Invoke Proximity -> StartForge to open the Forge UI",
        Callback = function()
            local vu259 = vu230({
                "Shared",
                "Packages",
                "Knit",
                "Services",
                "ProximityService",
                "RF",
                "Forge"
            }) or vu230({
                "Controllers",
                "ForgeController",
                "RF",
                "Forge"
            })
            local vu260 = vu230({
                "Shared",
                "Packages",
                "Knit",
                "Services",
                "ForgeService",
                "RF",
                "StartForge"
            }) or vu230({
                "Controllers",
                "ForgeController",
                "RF",
                "StartForge"
            })
            local vu261 = workspace:FindFirstChild("Proximity")
            if vu261 then
                vu261 = workspace.Proximity:FindFirstChild("Forge")
            end
            if vu261 then
                if vu259 then
                    pcall(function()
                        vu259:InvokeServer(vu261)
                    end)
                    task.wait(0.12)
                end
                if vu260 then
                    pcall(function()
                        vu260:InvokeServer(vu261)
                    end)
                end
                print("[Forge Helper] Opened Forge UI (attempted).")
            else
                warn("[Forge Helper] forge object not found in workspace.Proximity")
            end
        end
    })
    v221:Divider()
    local vu262 = false
    local vu263 = false
    v221:Toggle({
        Title = "Complete Melt",
        Desc = "When enabled, Melt minigame will auto-complete visually",
        Type = "Checkbox",
        Value = false,
        Callback = function(p264)
            vu262 = p264
            if vu262 then
                local v265, v266 = vu247("MeltMinigame", vu254)
                if v265 then
                    print("[Forge Helper] Melt auto-complete ENABLED")
                else
                    warn("[Forge Helper] Unable to patch MeltMinigame:", v266 or "unknown")
                end
            elseif vu250("MeltMinigame") then
                print("[Forge Helper] Melt auto-complete DISABLED")
            else
                print("[Forge Helper] Melt patch not found/restored")
            end
        end
    })
    v221:Toggle({
        Title = "Complete Pour",
        Desc = "When enabled, Pour minigame will auto-complete visually",
        Type = "Checkbox",
        Value = false,
        Callback = function(p267)
            vu263 = p267
            if vu263 then
                local v268, v269 = vu247("PourMinigame", vu258)
                if v268 then
                    print("[Forge Helper] Pour auto-complete ENABLED")
                else
                    warn("[Forge Helper] Unable to patch PourMinigame:", v269 or "unknown")
                end
            elseif vu250("PourMinigame") then
                print("[Forge Helper] Pour auto-complete DISABLED")
            else
                print("[Forge Helper] Pour patch not found/restored")
            end
        end
    })
    local vu270 = false
    v221:Toggle({
        Title = "Auto Hammer",
        Desc = "Automatically completes hammer minigame",
        Type = "Checkbox",
        Value = false,
        Callback = function(p271)
            vu270 = p271
        end
    })
    task.spawn(function()
        while true do
            local vu272 = false
            local function v273()
                vu272 = true
            end
            task.wait(0.05)
            if vu270 then
                local v274 = vu223:FindFirstChild("Forge")
                if not v274 then
                    v273()
                end
                local v275 = v274:FindFirstChild("HammerMinigame")
                if not (v275 and v275.Visible) then
                    v273()
                end
                local v276 = workspace:FindFirstChild("Debris")
                if not v276 then
                    v273()
                end
                local v277, v278, v279 = ipairs(v276:GetChildren())
                while true do
                    local vu280
                    v279, vu280 = v277(v278, v279)
                    if v279 == nil then
                        break
                    end
                    if vu280:FindFirstChild("ClickDetector") then
                        pcall(function()
                            fireclickdetector(vu280.ClickDetector)
                        end)
                    end
                end
            end
            if vu272 then
                return
            end
        end
    end)
    local vu281 = false
    local vu282 = nil
    v221:Toggle({
        Title = "Auto-Perfect Hammer",
        Desc = "Automatically \'perfect\' each Hammer note (very simple)",
        Type = "Checkbox",
        Value = false,
        Callback = function(p283)
            vu281 = p283
            local v284, _ = vu240("HammerMinigame")
            if v284 then
                if vu281 then
                    if not vu282 then
                        vu282 = v284.CreateNote
                    end
                    function v284.CreateNote(_, p285)
                        local v286 = (p285 and p285.Lifetime or 1) * 25 / 44
                        task.wait(v286)
                        return true
                    end
                    print("[Forge Helper] Hammer auto-perfect ENABLED")
                elseif vu282 and v284 then
                    v284.CreateNote = vu282
                    vu282 = nil
                    print("[Forge Helper] Hammer auto-perfect DISABLED")
                else
                    print("[Forge Helper] Hammer auto-perfect: nothing to restore")
                end
            else
                warn("[Forge Helper] HammerMinigame module not found.")
            end
        end
    })
    print("Forge Helper loaded.")







local v445 = Window:Tab({
        Title = "Mobs",
        Icon = "sword"
    })
    local vu446 = Players.LocalPlayer
    local v447 = game:GetService("UserInputService")
    local v448 = ReplicatedStorage:WaitForChild("Shared"):WaitForChild("Data"):WaitForChild("Enemies")
    local vu449 = workspace:WaitForChild("Living")
    local vu450 = nil
    pcall(function()
        vu450 = ReplicatedStorage:WaitForChild("Assets"):WaitForChild("Mobs")
    end)
    local vu451 = nil
    pcall(function()
        vu451 = ReplicatedStorage.Shared.Packages.Knit.Services.ToolService.RF
    end)
    local v452 = require(v448)
    local vu453 = {}
    local vu454 = "Nearest"
    local vu455 = false
    local vu456 = 0.14
    local vu457 = 200
    local vu458 = true
    local vu459 = nil
    local vu460 = false
    local vu461 = nil
    local vu462 = nil
    local vu463 = nil
    local vu464 = nil
    local vu465 = nil
    local vu466 = 0.3
    local vu467 = 240
    local vu468 = 14
    local vu469 = 0.9
    local vu470 = 1.6
    local vu471 = 3.5
    local vu472 = "Behind"
    local vu473 = 1.3
    local vu474 = true
    local vu475 = false
    local vu476 = {}
    local vu477 = nil
    local function vu479()
        local v478 = vu446
        if v478 then
            v478 = vu446.Character
        end
        return v478
    end
    local function vu481()
        local v480 = vu479()
        if v480 then
            v480 = v480:FindFirstChild("HumanoidRootPart") or v480.PrimaryPart
        end
        return v480
    end
    local function vu483()
        local v482 = vu479()
        if v482 then
            v482 = v482:FindFirstChildOfClass("Humanoid")
        end
        return v482
    end
    local function vu484()
        if vu451 and vu451.ToolActivated then
            pcall(function()
                vu451.ToolActivated:InvokeServer("Weapon")
            end)
        end
    end
    local function vu504()
        local v485 = vu481()
        if not v485 then
            return nil
        end
        local v486 = math.huge
        local v487 = vu449
        local v488, v489, v490 = pairs(v487:GetChildren())
        local v491 = nil
        local v492 = nil
        while true do
            local v493
            v490, v493 = v488(v489, v490)
            if v490 == nil then
                v493 = v491
                break
            end
            local vu494 = false
            local function v495()
                vu494 = true
            end
            local v496, v497
            if v493 and v493:IsA("Model") then
                local v498 = next(vu453) == nil
                if not v498 then
                    local v499, v500, v501 = pairs(vu453)
                    while true do
                        local v502
                        v501, v502 = v499(v500, v501)
                        if v501 == nil then
                            break
                        end
                        if v493.Name and v493.Name:lower():find(v501:lower()) then
                            v495()
                            v498 = true
                        end
                    end
                end
                if v498 then
                    local v503 = v493:FindFirstChild("HumanoidRootPart") or v493.PrimaryPart
                    v496 = v493:FindFirstChildOfClass("Humanoid")
                    if v503 and (v496 and (v496.Health and v496.Health > 0)) then
                        v497 = (v503.Position - v485.Position).Magnitude
                        if v497 > vu457 then
                            v497 = v486
                            v496 = v492
                            v493 = v491
                        elseif vu454 ~= "Nearest" then
                            if v491 and v496.Health >= v492.Health then
                                v497 = v486
                                v496 = v492
                                v493 = v491
                            else
                                v497 = v496.Health
                            end
                        elseif v497 >= v486 then
                            v497 = v486
                            v496 = v492
                            v493 = v491
                        end
                    else
                        v497 = v486
                        v496 = v492
                        v493 = v491
                    end
                else
                    v497 = v486
                    v496 = v492
                    v493 = v491
                end
            else
                v497 = v486
                v496 = v492
                v493 = v491
            end
            if vu494 then
                break
            end
            v486 = v497
            v492 = v496
            v491 = v493
        end
        return v493
    end
    local function vu515()
        if vu475 then
            return
        else
            local v505 = vu479()
            if v505 then
                vu476 = {}
                local v506, v507, v508 = ipairs(v505:GetDescendants())
                while true do
                    local v509
                    v508, v509 = v506(v507, v508)
                    if v508 == nil then
                        break
                    end
                    if v509:IsA("BasePart") then
                        vu476[v509] = v509.CanCollide
                    end
                end
                vu477 = RunService.Heartbeat:Connect(function()
                    local v510 = vu479()
                    if v510 then
                        local v511, v512, v513 = ipairs(v510:GetDescendants())
                        while true do
                            local v514
                            v513, v514 = v511(v512, v513)
                            if v513 == nil then
                                break
                            end
                            if v514:IsA("BasePart") then
                                v514.CanCollide = false
                            end
                        end
                    end
                end)
                vu475 = true
            end
        end
    end
    local function vu521()
        if vu475 then
            if vu477 then
                vu477:Disconnect()
                vu477 = nil
            end
            local v516, v517, v518 = pairs(vu476)
            while true do
                local vu519, vu520 = v516(v517, v518)
                if vu519 == nil then
                    break
                end
                v518 = vu519
                if vu519 and vu519.Parent then
                    pcall(function()
                        vu519.CanCollide = vu520
                    end)
                end
            end
            vu476 = {}
            vu475 = false
        end
    end
    local function vu530(p522, p523, p524)
        local v525 = math.max(0, tonumber(p523) or 0)
        local v526 = p522.CFrame.LookVector
        if vu472 ~= "Behind" then
            if vu472 ~= "InFront" then
                local v527 = p522.Position - v526 * v525 + Vector3.new(0, p524, 0)
                return CFrame.new(v527, p522.Position)
            else
                local v528 = p522.Position + v526 * v525 + Vector3.new(0, p524, 0)
                return CFrame.new(v528, p522.Position)
            end
        else
            local v529 = p522.Position - v526 * v525 + Vector3.new(0, p524, 0)
            return CFrame.new(v529, p522.Position)
        end
    end
    local function vu531()
        if vu462 then
            pcall(function()
                if typeof(vu462.Cancel) == "function" then
                    vu462:Cancel()
                end
            end)
            vu462 = nil
        end
        if vu464 then
            pcall(function()
                vu464:Disconnect()
            end)
            vu464 = nil
        end
        vu465 = nil
    end
    local function vu536()
        if vu463 and vu463.Parent then
            local vu532 = vu481()
            local v533 = vu463:FindFirstChild("HumanoidRootPart") or vu463.PrimaryPart
            if vu532 and v533 then
                local vu534 = vu530(v533, vu471, vu470)
                if vu467 >= (vu534.Position - vu532.Position).Magnitude then
                    local vu535 = 0.6
                    pcall(function()
                        vu532.CFrame = vu532.CFrame:Lerp(vu534, math.clamp(vu535, 0, 1))
                    end)
                    vu465 = vu534
                end
            else
                return
            end
        else
            return
        end
    end
    local function vu537()
        vu531()
        vu536()
    end
    function startFollow(p538, p539)
        if p538 and p538.Parent then
            local vu540 = tonumber(p539) or vu471
            if vu461 then
                pcall(function()
                    task.cancel(vu461)
                end)
                vu461 = nil
            end
            if vu464 then
                pcall(function()
                    vu464:Disconnect()
                end)
                vu464 = nil
            end
            vu463 = p538
            vu461 = task.spawn(function()
                if vu474 then
                    vu515()
                end
                vu465 = nil
                vu464 = RunService.Heartbeat:Connect(function(p541)
                    if vu455 and (vu458 and (vu463 and vu463.Parent)) then
                        local vu542 = vu481()
                        local v543 = vu463
                        if v543 then
                            v543 = vu463:FindFirstChild("HumanoidRootPart") or vu463.PrimaryPart
                        end
                        local v544 = vu463
                        if v544 then
                            v544 = vu463:FindFirstChildOfClass("Humanoid")
                        end
                        if vu542 and (v543 and (v544 and (not v544 or v544.Health > 0))) then
                            local vu545 = vu530(v543, vu540, vu470)
                            local v546 = (vu545.Position - vu542.Position).Magnitude
                            if vu467 >= v546 then
                                if vu465 then
                                    if vu466 <= (vu465.Position - vu545.Position).Magnitude then
                                        vu465 = vu545
                                    end
                                else
                                    vu465 = vu545
                                end
                                local v547 = vu468 / math.max(0.05, tonumber(vu473) or 1)
                                local vu548 = v546 <= 0.001 and 0.45 or math.clamp(v547 * p541 / math.max(v546, 0.01), 0, 0.45)
                                if v546 > vu469 then
                                    local v549, _ = pcall(function()
                                        vu542.CFrame = vu542.CFrame:Lerp(vu545, vu548)
                                    end)
                                    if not v549 then
                                        if vu464 then
                                            pcall(function()
                                                vu464:Disconnect()
                                            end)
                                        end
                                        vu464 = nil
                                    end
                                else
                                    pcall(function()
                                        vu542.CFrame = vu545
                                    end)
                                end
                            else
                                return
                            end
                        else
                            if vu464 then
                                pcall(function()
                                    vu464:Disconnect()
                                end)
                            end
                            vu464 = nil
                            return
                        end
                    else
                        if vu464 then
                            pcall(function()
                                vu464:Disconnect()
                            end)
                        end
                        vu464 = nil
                        return
                    end
                end)
                while vu455 and (vu458 and (vu463 and vu463.Parent)) and (vu463:FindFirstChildOfClass("Humanoid") and (vu463:FindFirstChildOfClass("Humanoid").Health > 0 and vu464)) do
                    task.wait(0.12)
                end
                if vu474 then
                    vu521()
                end
                vu531()
                vu461 = nil
                vu463 = nil
            end)
        end
    end
    function stopFollow()
        if vu461 then
            pcall(function()
                task.cancel(vu461)
            end)
            vu461 = nil
        end
        if vu464 then
            pcall(function()
                vu464:Disconnect()
            end)
            vu464 = nil
        end
        if vu474 then
            vu521()
        end
        vu531()
        vu463 = nil
    end
    local function vu557()
        if not vu459 then
            vu460 = false
            vu459 = task.spawn(function()
                while vu455 and not vu460 do
                    local vu550 = false
                    local function v551()
                        vu550 = true
                    end
                    local v552 = vu504()
                    if v552 then
                        local v553 = vu481()
                        local v554 = vu483()
                        if v553 and v554 then
                            local v555 = v552:FindFirstChild("HumanoidRootPart") or v552.PrimaryPart
                            local v556 = v552:FindFirstChildOfClass("Humanoid")
                            if v555 and v556 then
                                if vu458 then
                                    startFollow(v552, vu471)
                                end
                                while vu455 and (v556 and (v556.Health > 0 and (v552.Parent and not vu460))) do
                                    if not (v553 and v554) then
                                        v551()
                                    end
                                    if vu458 and (not vu461 or vu463 ~= v552) then
                                        startFollow(v552, vu471)
                                    end
                                    vu484()
                                    task.wait(math.max(0.02, tonumber(vu456) or 0.14))
                                end
                                stopFollow()
                                task.wait(0.18)
                            else
                                task.wait(0.2)
                            end
                        else
                            task.wait(0.4)
                        end
                    else
                        task.wait(0.28)
                    end
                    if vu550 then
                        break
                    end
                end
                vu459 = nil
            end)
        end
    end
    local function vu558()
        vu460 = true
        if vu459 then
            pcall(function()
                task.cancel(vu459)
            end)
            vu459 = nil
        end
        stopFollow()
    end
    local v559, v560, v561 = pairs(v452)
    local vu562 = vu454
    local vu563 = vu473
    local vu564 = vu471
    local vu565 = vu474
    local vu566 = vu446
    local vu567 = vu455
    local vu568 = vu453
    local vu569 = vu472
    local vu570 = vu458
    local vu571 = vu450
    local v572 = {}
    while true do
        local vu573, v574 = v559(v560, v561)
        if vu573 == nil then
            break
        end
        v561 = vu573
        local vu575 = nil
        pcall(function()
            if vu571 and vu571:FindFirstChild(vu573) then
                local v576 = vu571:FindFirstChild(vu573)
                if v576:FindFirstChild("Icon") and v576.Icon:IsA("StringValue") then
                    vu575 = v576.Icon.Value
                elseif v576:FindFirstChild("Icon") and type(v576.Icon.Value) == "string" then
                    vu575 = v576.Icon.Value
                end
            end
        end)
        if not vu575 and (type(v574) == "table" and (v574.Slot and v574.Slot.Icon)) then
            vu575 = v574.Slot.Icon
        end
        local v577 = {
            Title = vu573,
            Icon = vu575 or "bird"
        }
        table.insert(v572, v577)
    end
    table.sort(v572, function(p578, p579)
        return p578.Title < p579.Title
    end)
    v445:Dropdown({
        Title = "Select Mobs",
        Desc = "Select mobs to farm",
        Values = v572,
        Value = {},
        Multi = true,
        Callback = function(p580)
            if type(p580) ~= "table" then
                local v581 = p580 and p580.Title or tostring(p580)
                if vu568[v581] then
                    vu568[v581] = nil
                    print("Deselected:", v581)
                else
                    vu568[v581] = true
                    print("Selected:", v581)
                end
            else
                vu568 = {}
                local v582, v583, v584 = ipairs(p580)
                while true do
                    local v585
                    v584, v585 = v582(v583, v584)
                    if v584 == nil then
                        break
                    end
                    if type(v585) == "table" and v585.Title then
                        vu568[v585.Title] = true
                    end
                end
                local v586, v587, v588 = pairs(vu568)
                local v589 = {}
                while true do
                    local v590
                    v588, v590 = v586(v587, v588)
                    if v588 == nil then
                        break
                    end
                    table.insert(v589, v588)
                end
                print("Selected mobs (multi):", # v589 > 0 and table.concat(v589, ", ") or "none")
            end
        end
    })
    v445:Dropdown({
        Title = "Target Type",
        Desc = "Nearest / LowestHealth",
        Values = {
            {
                Title = "Nearest"
            },
            {
                Title = "LowestHealth"
            }
        },
        Value = {
            Title = "Nearest"
        },
        Callback = function(p591)
            vu562 = p591.Title
            print("TargetType ->", vu562)
        end
    })
    v445:Divider()
    v445:Toggle({
        Title = "Auto Attack",
        Desc = " automatic attack",
        Icon = "bird",
        Type = "Checkbox",
        Value = false,
        Callback = function(p592)
            if p592 and next(vu568) == nil then
                vu2:Notify({
                    Title = "Auto Attack Blocked",
                    Content = "You must select at least one mob before enabling Auto Attack.",
                    Duration = 3,
                    Icon = "bird"
                })
                vu567 = false
                vu558()
                stopFollow()
            else
                vu567 = p592
                print("AutoAttack:", p592)
                if p592 then
                    vu557()
                else
                    vu558()
                    stopFollow()
                end
            end
        end
    })
    v445:Toggle({
        Title = "AutoFollow  Mobs",
        Desc = "will go to mobs.",
        Icon = "house",
        Type = "Checkbox",
        Value = vu570,
        Callback = function(p593)
            vu570 = p593
            print("AutoKite:", p593)
        end
    })
    v445:Toggle({
        Title = "NoClip During Follow",
        Desc = "When ON, temporarily disables collisions while the script is moving you (avoid getting stuck).",
        Value = vu565,
        Callback = function(p594)
            vu565 = p594
            print("NoClipDuringFollow:", p594)
        end
    })
    v445:Dropdown({
        Title = "Auto Follow osition",
        Desc = "Where to position relative to the mob",
        Values = {
            {
                Title = "Behind"
            },
            {
                Title = "InFront"
            }
        },
        Value = {
            Title = vu569
        },
        Callback = function(p595)
            vu569 = p595 and p595.Title or tostring(p595)
            vu537()
            print("AutoKitePosition ->", vu569)
        end
    })
    v445:Slider({
        Title = "How Far (Distance Offset)",
        Desc = "0 = no offset, higher = further from mob",
        Value = {
            Min = 0,
            Max = 14,
            Default = vu564
        },
        Step = 0.1,
        Callback = function(p596)
            vu564 = tonumber(p596) or 0
            vu537()
            print("AUTO_KILL_DISTANCE:", vu564)
        end
    })
    v445:Slider({
        Title = "Movement Speed",
        Desc = "Lower = Faster, Higher = Slower (Recommend to set it to 0.20!)",
        Value = {
            Min = 0.05,
            Max = 2.5,
            Default = 0.2
        },
        Step = 0.05,
        Callback = function(p597)
            vu563 = tonumber(p597)
            print("Tween Time =", vu563)
        end
    })
    v447.InputBegan:Connect(function(p598, p599)
        if not p599 then
            if p598.KeyCode == Enum.KeyCode.F8 then
                vu567 = false
                vu558()
                stopFollow()
                warn("Auto routines halted (F8).")
            end
        end
    end)
    vu566.AncestryChanged:Connect(function()
        if not vu566:IsDescendantOf(game) then
            vu558()
            stopFollow()
        end
    end)

-- ==================== TAB 6: SETTINGS ====================
local Tab6 = Window:Tab({
    Title = "Settings",
    Icon = "settings",
    Locked = false,
})

local SettingsSection1 = Tab6:Section({
    Title = "Window Settings",
    Icon = "layout",
})

Tab6:Space()

local TransparencyToggle = Tab6:Toggle({
    Title = "Window Transparency",
    Desc = "Toggle window transparency on/off",
    Icon = "eye",
    Type = "Checkbox",
    Default = false,
    Callback = function(state)
        Window:ToggleTransparency(state)
        print("Transparency: " .. tostring(state))
    end
})

Tab6:Divider()

local SettingsSection2 = Tab6:Section({
    Title = "Keybind Settings",
    Icon = "keyboard",
})

local KeybindInput = Tab6:Input({
    Title = "Toggle UI Keybind",
    Desc = "Type ONE letter or key (e.g., Q or RightControl)",
    Value = "RightControl",
    InputIcon = "keyboard",
    Type = "Input",
    Placeholder = "Enter key...",
    Callback = function(input)
        input = input:gsub("^%s*(.-)%s*$", "%1")
        
        local keyCode
        
        if #input == 1 then
            local upperInput = input:upper()
            keyCode = Enum.KeyCode[upperInput]
        else
            local success, result = pcall(function()
                return Enum.KeyCode[input]
            end)
            if success then
                keyCode = result
            end
        end
        
        if keyCode then
            Window:SetToggleKey(keyCode)
            print("Keybind set to: " .. input)
            WindUI:Notify({
                Title = "Keybind Updated",
                Content = "Press '" .. input .. "' to toggle UI",
                Duration = 3,
                Icon = "check",
            })
        else
            print("Invalid key: " .. input)
            WindUI:Notify({
                Title = "Invalid Key",
                Content = "Enter a single letter (Q) or key name (RightControl)",
                Duration = 4,
                Icon = "x",
            })
        end
    end
})

Window:SetToggleKey(Enum.KeyCode.RightControl)

Tab6:Space()

local MiscTab = Window:Tab({
    Title = "Misc",
    Icon = "folder",
    Locked = false,
})

local ToggleAntiAFK = MiscTab:Toggle({
    Title = "Anti AFK",
    Desc = "Prevents automatic idle kick",
    Icon = "shield-check",
    Type = "Checkbox",
    Default = false,
    Callback = function(state)
        if state then
            local player = game.Players.LocalPlayer

            -- Disconnect existing idle connections if any
            if getgenv().AntiAFKConnection then
                getgenv().AntiAFKConnection:Disconnect()
            end

            -- Connect to Idled event
            getgenv().AntiAFKConnection = player.Idled:Connect(function()
                -- simulate click or jump to prevent kick
                game:GetService("VirtualUser"):CaptureController()
                game:GetService("VirtualUser"):ClickButton2(Vector2.new())
                print("‚è± Anti-AFK triggered!")
            end)

            print("‚úÖ Anti-AFK enabled")
        else
            -- Disconnect Anti-AFK
            if getgenv().AntiAFKConnection then
                getgenv().AntiAFKConnection:Disconnect()
                getgenv().AntiAFKConnection = nil
            end
            print("‚õî Anti-AFK disabled")
        end
    end
})

local Buttonpowersave = MiscTab:Button({
    Title = "Power Save Mode",
    Desc = "Open Power Save Script",
    Locked = false,
    Callback = function()
        print("Opening Power Save Script...")
        loadstring(game:HttpGet("https://raw.githubusercontent.com/FryzerHub/SubScripts/refs/heads/main/screen%20saver"))()
    end
})
