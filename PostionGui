local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Hub Library
local PhantomHub = {}
PhantomHub.__index = PhantomHub

-- Configuration
local Config = {
    HubName = "PHANTOM HUB",
    Version = "v2.4.0",
    Colors = {
        Background = Color3.fromRGB(30, 30, 40),
        Sidebar = Color3.fromRGB(25, 25, 35),
        Primary = Color3.fromRGB(50, 50, 65),
        Secondary = Color3.fromRGB(40, 40, 55),
        Accent = Color3.fromRGB(100, 110, 255),
        Success = Color3.fromRGB(80, 200, 120),
        Warning = Color3.fromRGB(255, 170, 30),
        Error = Color3.fromRGB(255, 80, 80),
        Text = Color3.fromRGB(255, 255, 255),
        TextDark = Color3.fromRGB(200, 200, 210),
        Border = Color3.fromRGB(70, 70, 85)
    },
    Fonts = {
        Regular = Enum.Font.Gotham,
        Bold = Enum.Font.GothamBold,
        Medium = Enum.Font.GothamMedium
    }
}

-- Create Main Window
function PhantomHub:CreateWindow(config)
    local Window = {
        Tabs = {},
        CurrentTab = nil,
        Minimized = false
    }
    
    -- Remove existing GUI
    if PlayerGui:FindFirstChild("PhantomHubGUI") then
        PlayerGui:FindFirstChild("PhantomHubGUI"):Destroy()
    end
    
    -- Main ScreenGui
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "PhantomHubGUI"
    ScreenGui.Parent = PlayerGui
    ScreenGui.ResetOnSpawn = false
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ScreenGui.IgnoreGuiInset = true
    
    -- Main Frame
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Parent = ScreenGui
    MainFrame.BackgroundColor3 = Config.Colors.Background
    MainFrame.BorderSizePixel = 0
    MainFrame.Position = UDim2.new(0.5, -210, 0.5, -150)
    MainFrame.Size = UDim2.new(0, 420, 0, 300)
    MainFrame.ClipsDescendants = true
    MainFrame.ZIndex = 1
    
    local MainCorner = Instance.new("UICorner")
    MainCorner.CornerRadius = UDim.new(0, 8)
    MainCorner.Parent = MainFrame
    
    -- Drop shadow
    local Shadow = Instance.new("Frame")
    Shadow.Name = "Shadow"
    Shadow.Parent = ScreenGui
    Shadow.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Shadow.BackgroundTransparency = 0.4
    Shadow.BorderSizePixel = 0
    Shadow.Position = UDim2.new(0.5, -215, 0.5, -145)
    Shadow.Size = UDim2.new(0, 430, 0, 310)
    Shadow.ZIndex = 0
    
    local ShadowCorner = Instance.new("UICorner")
    ShadowCorner.CornerRadius = UDim.new(0, 8)
    ShadowCorner.Parent = Shadow
    
    -- Title Bar
    local TitleBar = Instance.new("Frame")
    TitleBar.Name = "TitleBar"
    TitleBar.Parent = MainFrame
    TitleBar.BackgroundColor3 = Config.Colors.Sidebar
    TitleBar.BorderSizePixel = 0
    TitleBar.Size = UDim2.new(1, 0, 0, 40)
    TitleBar.ZIndex = 2
    
    local TitleCorner = Instance.new("UICorner")
    TitleCorner.CornerRadius = UDim.new(0, 8)
    TitleCorner.Parent = TitleBar
    
    local TitleFix = Instance.new("Frame")
    TitleFix.Parent = TitleBar
    TitleFix.BackgroundColor3 = Config.Colors.Sidebar
    TitleFix.BorderSizePixel = 0
    TitleFix.Position = UDim2.new(0, 0, 0.8, 0)
    TitleFix.Size = UDim2.new(1, 0, 0.2, 0)
    TitleFix.ZIndex = 2
    
    -- Hub Title
    local HubTitle = Instance.new("TextLabel")
    HubTitle.Name = "HubTitle"
    HubTitle.Parent = TitleBar
    HubTitle.BackgroundTransparency = 1
    HubTitle.Position = UDim2.new(0, 15, 0, 0)
    HubTitle.Size = UDim2.new(0, 120, 1, 0)
    HubTitle.Font = Config.Fonts.Bold
    HubTitle.Text = config.HubName or Config.HubName
    HubTitle.TextColor3 = Config.Colors.Text
    HubTitle.TextSize = 14
    HubTitle.TextXAlignment = Enum.TextXAlignment.Left
    HubTitle.ZIndex = 3
    
    -- Version Label
    local VersionLabel = Instance.new("TextLabel")
    VersionLabel.Name = "VersionLabel"
    VersionLabel.Parent = TitleBar
    VersionLabel.BackgroundTransparency = 1
    VersionLabel.Position = UDim2.new(0, 135, 0, 0)
    VersionLabel.Size = UDim2.new(0, 60, 1, 0)
    VersionLabel.Font = Config.Fonts.Regular
    VersionLabel.Text = Config.Version
    VersionLabel.TextColor3 = Config.Colors.TextDark
    VersionLabel.TextSize = 12
    VersionLabel.TextXAlignment = Enum.TextXAlignment.Left
    VersionLabel.ZIndex = 3
    
    -- Game Name
    local GameName = Instance.new("TextLabel")
    GameName.Name = "GameName"
    GameName.Parent = TitleBar
    GameName.BackgroundTransparency = 1
    GameName.Position = UDim2.new(1, -120, 0, 0)
    GameName.Size = UDim2.new(0, 100, 1, 0)
    GameName.Font = Config.Fonts.Regular
    GameName.Text = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name:upper():sub(1, 15) .. "..."
    GameName.TextColor3 = Config.Colors.TextDark
    GameName.TextSize = 10
    GameName.TextXAlignment = Enum.TextXAlignment.Right
    GameName.TextTruncate = Enum.TextTruncate.AtEnd
    GameName.ZIndex = 3
    
    -- Minimize Button
    local MinimizeButton = Instance.new("TextButton")
    MinimizeButton.Name = "MinimizeButton"
    MinimizeButton.Parent = TitleBar
    MinimizeButton.BackgroundColor3 = Config.Colors.Warning
    MinimizeButton.BorderSizePixel = 0
    MinimizeButton.Position = UDim2.new(1, -45, 0, 8)
    MinimizeButton.Size = UDim2.new(0, 20, 0, 20)
    MinimizeButton.Font = Config.Fonts.Bold
    MinimizeButton.Text = "–"
    MinimizeButton.TextColor3 = Config.Colors.Text
    MinimizeButton.TextSize = 12
    MinimizeButton.ZIndex = 3
    
    local MinCorner = Instance.new("UICorner")
    MinCorner.CornerRadius = UDim.new(0, 5)
    MinCorner.Parent = MinimizeButton
    
    -- Close Button
    local CloseButton = Instance.new("TextButton")
    CloseButton.Name = "CloseButton"
    CloseButton.Parent = TitleBar
    CloseButton.BackgroundColor3 = Config.Colors.Error
    CloseButton.BorderSizePixel = 0
    CloseButton.Position = UDim2.new(1, -25, 0, 8)
    CloseButton.Size = UDim2.new(0, 20, 0, 20)
    CloseButton.Font = Config.Fonts.Bold
    CloseButton.Text = "✕"
    CloseButton.TextColor3 = Config.Colors.Text
    CloseButton.TextSize = 12
    CloseButton.ZIndex = 3
    
    local CloseCorner = Instance.new("UICorner")
    CloseCorner.CornerRadius = UDim.new(0, 5)
    CloseCorner.Parent = CloseButton
    
    -- Sidebar
    local Sidebar = Instance.new("Frame")
    Sidebar.Name = "Sidebar"
    Sidebar.Parent = MainFrame
    Sidebar.BackgroundColor3 = Config.Colors.Sidebar
    Sidebar.BorderSizePixel = 0
    Sidebar.Position = UDim2.new(0, 0, 0, 40)
    Sidebar.Size = UDim2.new(0, 120, 1, -40)
    Sidebar.ZIndex = 2
    
    -- Tab Container
    local TabContainer = Instance.new("ScrollingFrame")
    TabContainer.Name = "TabContainer"
    TabContainer.Parent = Sidebar
    TabContainer.BackgroundTransparency = 1
    TabContainer.BorderSizePixel = 0
    TabContainer.Position = UDim2.new(0, 0, 0, 5)
    TabContainer.Size = UDim2.new(1, 0, 1, -5)
    TabContainer.ScrollBarThickness = 0
    TabContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
    TabContainer.ZIndex = 3
    
    local TabListLayout = Instance.new("UIListLayout")
    TabListLayout.Parent = TabContainer
    TabListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    TabListLayout.Padding = UDim.new(0, 5)
    
    -- Content Area
    local ContentArea = Instance.new("Frame")
    ContentArea.Name = "ContentArea"
    ContentArea.Parent = MainFrame
    ContentArea.BackgroundColor3 = Config.Colors.Background
    ContentArea.BorderSizePixel = 0
    ContentArea.Position = UDim2.new(0, 120, 0, 40)
    ContentArea.Size = UDim2.new(1, -120, 1, -40)
    ContentArea.ZIndex = 2
    
    -- Content Header
    local ContentHeader = Instance.new("Frame")
    ContentHeader.Name = "ContentHeader"
    ContentHeader.Parent = ContentArea
    ContentHeader.BackgroundColor3 = Config.Colors.Primary
    ContentHeader.BorderSizePixel = 0
    ContentHeader.Size = UDim2.new(1, 0, 0, 40)
    ContentHeader.ZIndex = 3
    
    local HeaderCorner = Instance.new("UICorner")
    HeaderCorner.CornerRadius = UDim.new(0, 6)
    HeaderCorner.Parent = ContentHeader
    
    local HeaderTitle = Instance.new("TextLabel")
    HeaderTitle.Name = "HeaderTitle"
    HeaderTitle.Parent = ContentHeader
    HeaderTitle.BackgroundTransparency = 1
    HeaderTitle.Position = UDim2.new(0, 15, 0, 0)
    HeaderTitle.Size = UDim2.new(1, -15, 1, 0)
    HeaderTitle.Font = Config.Fonts.Bold
    HeaderTitle.Text = "HOME"
    HeaderTitle.TextColor3 = Config.Colors.Text
    HeaderTitle.TextSize = 16
    HeaderTitle.TextXAlignment = Enum.TextXAlignment.Left
    HeaderTitle.ZIndex = 4
    
    -- Content Scroll Frame
    local ContentScroll = Instance.new("ScrollingFrame")
    ContentScroll.Name = "ContentScroll"
    ContentScroll.Parent = ContentArea
    ContentScroll.BackgroundTransparency = 1
    ContentScroll.BorderSizePixel = 0
    ContentScroll.Position = UDim2.new(0, 0, 0, 40)
    ContentScroll.Size = UDim2.new(1, 0, 1, -40)
    ContentScroll.ScrollBarThickness = 3
    ContentScroll.ScrollBarImageColor3 = Config.Colors.Accent
    ContentScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
    ContentScroll.ZIndex = 3
    ContentScroll.ClipsDescendants = true
    
    local ContentListLayout = Instance.new("UIListLayout")
    ContentListLayout.Parent = ContentScroll
    ContentListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    ContentListLayout.Padding = UDim.new(0, 8)
    
    local ContentPadding = Instance.new("UIPadding")
    ContentPadding.Parent = ContentScroll
    ContentPadding.PaddingLeft = UDim.new(0, 10)
    ContentPadding.PaddingRight = UDim.new(0, 10)
    ContentPadding.PaddingTop = UDim.new(0, 10)
    
    -- Update CanvasSize dynamically
    ContentListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        if Window.CurrentTab then
            ContentScroll.CanvasSize = UDim2.new(0, 0, 0, ContentListLayout.AbsoluteContentSize.Y + 20)
        end
    end)
    
    -- Store references
    Window.ScreenGui = ScreenGui
    Window.MainFrame = MainFrame
    Window.Shadow = Shadow
    Window.TabContainer = TabContainer
    Window.ContentScroll = ContentScroll
    Window.HeaderTitle = HeaderTitle
    
    -- Close functionality
    CloseButton.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)
    
    -- Minimize functionality
    MinimizeButton.MouseButton1Click:Connect(function()
        Window.Minimized = not Window.Minimized
        local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        if Window.Minimized then
            Sidebar.Visible = false
            ContentArea.Visible = false
            TweenService:Create(MainFrame, tweenInfo, {Size = UDim2.new(0, 420, 0, 40)}):Play()
            TweenService:Create(Shadow, tweenInfo, {Size = UDim2.new(0, 430, 0, 50)}):Play()
            MinimizeButton.Text = "+"
        else
            Sidebar.Visible = true
            ContentArea.Visible = true
            TweenService:Create(MainFrame, tweenInfo, {Size = UDim2.new(0, 420, 0, 300)}):Play()
            TweenService:Create(Shadow, tweenInfo, {Size = UDim2.new(0, 430, 0, 310)}):Play()
            MinimizeButton.Text = "–"
        end
    end)
    
    -- Drag functionality (PC and Mobile)
    local dragging = false
    local dragInput, mousePos, framePos
    
    local function startDrag(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            mousePos = input.Position
            framePos = MainFrame.Position
        end
    end
    
    local function updateDrag(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            if dragging then
                local delta = input.Position - mousePos
                MainFrame.Position = UDim2.new(framePos.X.Scale, framePos.X.Offset + delta.X, framePos.Y.Scale, framePos.Y.Offset + delta.Y)
                Shadow.Position = UDim2.new(framePos.X.Scale, framePos.X.Offset + delta.X - 5, framePos.Y.Scale, framePos.Y.Offset + delta.Y + 5)
            end
        end
    end
    
    local function endDrag(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end
    
    TitleBar.InputBegan:Connect(startDrag)
    UserInputService.InputChanged:Connect(updateDrag)
    UserInputService.InputEnded:Connect(endDrag)
    
    return Window
end

-- Create Tab
function PhantomHub:CreateTab(Window, config)
    local Tab = {
        Name = config.Name or "Tab",
        Icon = config.Icon or "🏠",
        Elements = {},
        Active = false
    }
    
    local TabButton = Instance.new("TextButton")
    TabButton.Name = "TabButton_" .. Tab.Name
    TabButton.Parent = Window.TabContainer
    TabButton.BackgroundColor3 = Config.Colors.Secondary
    TabButton.BorderSizePixel = 0
    TabButton.Size = UDim2.new(1, -8, 0, 35)
    TabButton.Position = UDim2.new(0, 4, 0, 0)
    TabButton.AutoButtonColor = false
    TabButton.Text = ""
    TabButton.ZIndex = 4
    TabButton.Visible = true
    
    local TabCorner = Instance.new("UICorner")
    TabCorner.CornerRadius = UDim.new(0, 6)
    TabCorner.Parent = TabButton
    
    local TabIcon = Instance.new("TextLabel")
    TabIcon.Name = "TabIcon"
    TabIcon.Parent = TabButton
    TabIcon.BackgroundTransparency = 1
    TabIcon.Position = UDim2.new(0, 10, 0, 0)
    TabIcon.Size = UDim2.new(0, 25, 1, 0)
    TabIcon.Font = Config.Fonts.Bold
    TabIcon.Text = Tab.Icon
    TabIcon.TextColor3 = Config.Colors.TextDark
    TabIcon.TextSize = 16
    TabIcon.TextXAlignment = Enum.TextXAlignment.Center
    TabIcon.ZIndex = 5
    TabIcon.Visible = true
    
    local TabName = Instance.new("TextLabel")
    TabName.Name = "TabName"
    TabName.Parent = TabButton
    TabName.BackgroundTransparency = 1
    TabName.Position = UDim2.new(0, 40, 0, 0)
    TabName.Size = UDim2.new(1, -50, 1, 0)
    TabName.Font = Config.Fonts.Medium
    TabName.Text = Tab.Name:upper()
    TabName.TextColor3 = Config.Colors.TextDark
    TabName.TextSize = 12
    TabName.TextXAlignment = Enum.TextXAlignment.Left
    TabName.ZIndex = 5
    TabName.Visible = true
    
    local TabContent = Instance.new("Frame")
    TabContent.Name = "TabContent_" .. Tab.Name
    TabContent.Parent = Window.ContentScroll
    TabContent.BackgroundTransparency = 1
    TabContent.Size = UDim2.new(1, 0, 1, 0)
    TabContent.Visible = false
    TabContent.ZIndex = 4
    
    local ContentListLayout = Instance.new("UIListLayout")
    ContentListLayout.Parent = TabContent
    ContentListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    ContentListLayout.Padding = UDim.new(0, 8)
    
    local ContentPadding = Instance.new("UIPadding")
    ContentPadding.Parent = TabContent
    ContentPadding.PaddingLeft = UDim.new(0, 5)
    ContentPadding.PaddingRight = UDim.new(0, 5)
    ContentPadding.PaddingTop = UDim.new(0, 5)
    
    local function SelectTab()
        for _, tab in pairs(Window.Tabs) do
            tab.Button.BackgroundColor3 = Config.Colors.Secondary
            tab.Icon.TextColor3 = Config.Colors.TextDark
            tab.Name.TextColor3 = Config.Colors.TextDark
            tab.Content.Visible = false
            tab.Active = false
        end
        TabButton.BackgroundColor3 = Config.Colors.Accent
        TabIcon.TextColor3 = Config.Colors.Text
        TabName.TextColor3 = Config.Colors.Text
        TabContent.Visible = true
        Tab.Active = true
        Window.CurrentTab = Tab
        Window.HeaderTitle.Text = Tab.Name:upper()
        Window.ContentScroll.CanvasSize = UDim2.new(0, 0, 0, ContentListLayout.AbsoluteContentSize.Y + 20)
    end
    
    TabButton.MouseButton1Click:Connect(SelectTab)
    
    TabButton.MouseEnter:Connect(function()
        if not Tab.Active then
            TweenService:Create(TabButton, TweenInfo.new(0.2), {BackgroundColor3 = Config.Colors.Primary}):Play()
        end
    end)
    
    TabButton.MouseLeave:Connect(function()
        if not Tab.Active then
            TweenService:Create(TabButton, TweenInfo.new(0.2), {BackgroundColor3 = Config.Colors.Secondary}):Play()
        end
    end)
    
    Tab.Button = TabButton
    Tab.Icon = TabIcon
    Tab.Name = TabName
    Tab.Content = TabContent
    
    table.insert(Window.Tabs, Tab)
    
    if #Window.Tabs == 1 then
        SelectTab()
    end
    
    Window.TabContainer.CanvasSize = UDim2.new(0, 0, 0, TabListLayout.AbsoluteContentSize.Y)
    TabListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        Window.TabContainer.CanvasSize = UDim2.new(0, 0, 0, TabListLayout.AbsoluteContentSize.Y)
    end)
    
    return Tab
end

-- Create Label
function PhantomHub:CreateLabel(Tab, config)
    local Label = Instance.new("TextLabel")
    Label.Name = "Label"
    Label.Parent = Tab.Content
    Label.BackgroundTransparency = 1
    Label.Size = UDim2.new(1, -10, 0, 25)
    Label.Font = Config.Fonts.Medium
    Label.Text = config.Text or "Label"
    Label.TextColor3 = config.Color or Config.Colors.Text
    Label.TextSize = config.Size or 14
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.ZIndex = 5
    Label.Visible = true
    
    table.insert(Tab.Elements, Label)
    Tab.Content.Parent.CanvasSize = UDim2.new(0, 0, 0, Tab.Content.UIListLayout.AbsoluteContentSize.Y + 20)
    
    return Label
end

-- Create Button
function PhantomHub:CreateButton(Tab, config)
    local active = false
    
    local ButtonFrame = Instance.new("Frame")
    ButtonFrame.Name = "ButtonFrame"
    ButtonFrame.Parent = Tab.Content
    ButtonFrame.BackgroundColor3 = Config.Colors.Secondary
    ButtonFrame.BorderSizePixel = 0
    ButtonFrame.Size = UDim2.new(1, -10, 0, 40)
    ButtonFrame.ZIndex = 5
    ButtonFrame.Visible = true
    
    local ButtonCorner = Instance.new("UICorner")
    ButtonCorner.CornerRadius = UDim.new(0, 6)
    ButtonCorner.Parent = ButtonFrame
    
    local Button = Instance.new("TextButton")
    Button.Name = "Button"
    Button.Parent = ButtonFrame
    Button.BackgroundTransparency = 1
    Button.Size = UDim2.new(1, 0, 1, 0)
    Button.Text = ""
    Button.ZIndex = 6
    Button.Visible = true
    
    local ButtonTitle = Instance.new("TextLabel")
    ButtonTitle.Name = "ButtonTitle"
    ButtonTitle.Parent = ButtonFrame
    ButtonTitle.BackgroundTransparency = 1
    ButtonTitle.Position = UDim2.new(0, 10, 0, 5)
    ButtonTitle.Size = UDim2.new(1, -60, 0, 15)
    ButtonTitle.Font = Config.Fonts.Medium
    ButtonTitle.Text = config.Name or "Button"
    ButtonTitle.TextColor3 = Config.Colors.Text
    ButtonTitle.TextSize = 12
    ButtonTitle.TextXAlignment = Enum.TextXAlignment.Left
    ButtonTitle.ZIndex = 6
    ButtonTitle.Visible = true
    
    local ButtonDesc = Instance.new("TextLabel")
    ButtonDesc.Name = "ButtonDesc"
    ButtonDesc.Parent = ButtonFrame
    ButtonDesc.BackgroundTransparency = 1
    ButtonDesc.Position = UDim2.new(0, 10, 0, 20)
    ButtonDesc.Size = UDim2.new(1, -60, 0, 15)
    ButtonDesc.Font = Config.Fonts.Regular
    ButtonDesc.Text = config.Description or ""
    ButtonDesc.TextColor3 = Config.Colors.TextDark
    ButtonDesc.TextSize = 10
    ButtonDesc.TextXAlignment = Enum.TextXAlignment.Left
    ButtonDesc.ZIndex = 6
    ButtonDesc.Visible = true
    
    local StatusBox = Instance.new("Frame")
    StatusBox.Name = "StatusBox"
    StatusBox.Parent = ButtonFrame
    StatusBox.BackgroundColor3 = Config.Colors.Primary
    StatusBox.BorderSizePixel = 0
    StatusBox.Position = UDim2.new(1, -40, 0.5, -10)
    StatusBox.Size = UDim2.new(0, 30, 0, 20)
    StatusBox.ZIndex = 6
    StatusBox.Visible = true
    
    local StatusCorner = Instance.new("UICorner")
    StatusCorner.CornerRadius = UDim.new(0, 5)
    StatusCorner.Parent = StatusBox
    
    local StatusText = Instance.new("TextLabel")
    StatusText.Name = "StatusText"
    StatusText.Parent = StatusBox
    StatusText.BackgroundTransparency = 1
    StatusText.Size = UDim2.new(1, 0, 1, 0)
    StatusText.Font = Config.Fonts.Bold
    StatusText.Text = "OFF"
    StatusText.TextColor3 = Config.Colors.TextDark
    StatusText.TextSize = 10
    StatusText.ZIndex = 7
    StatusText.Visible = true
    
    Button.MouseButton1Click:Connect(function()
        active = not active
        local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad)
        if active then
            TweenService:Create(StatusBox, tweenInfo, {BackgroundColor3 = Config.Colors.Success}):Play()
            TweenService:Create(StatusText, tweenInfo, {TextColor3 = Config.Colors.Text}):Play()
            StatusText.Text = "ON"
            if config.Callback then config.Callback(true) end
        else
            TweenService:Create(StatusBox, tweenInfo, {BackgroundColor3 = Config.Colors.Primary}):Play()
            TweenService:Create(StatusText, tweenInfo, {TextColor3 = Config.Colors.TextDark}):Play()
            StatusText.Text = "OFF"
            if config.Callback then config.Callback(false) end
        end
    end)
    
    Button.MouseEnter:Connect(function()
        TweenService:Create(ButtonFrame, TweenInfo.new(0.2), {BackgroundColor3 = Config.Colors.Primary}):Play()
    end)
    
    Button.MouseLeave:Connect(function()
        TweenService:Create(ButtonFrame, TweenInfo.new(0.2), {BackgroundColor3 = Config.Colors.Secondary}):Play()
    end)
    
    table.insert(Tab.Elements, ButtonFrame)
    Tab.Content.Parent.CanvasSize = UDim2.new(0, 0, 0, Tab.Content.UIListLayout.AbsoluteContentSize.Y + 20)
    
    return {
        Frame = ButtonFrame,
        SetActive = function(state)
            active = state
            StatusBox.BackgroundColor3 = active and Config.Colors.Success or Config.Colors.Primary
            StatusText.TextColor3 = active and Config.Colors.Text or Config.Colors.TextDark
            StatusText.Text = active and "ON" or "OFF"
        end
    }
end

-- Create Toggle
function PhantomHub:CreateToggle(Tab, config)
    local enabled = config.Default or false
    
    local ToggleFrame = Instance.new("Frame")
    ToggleFrame.Name = "ToggleFrame"
    ToggleFrame.Parent = Tab.Content
    ToggleFrame.BackgroundColor3 = Config.Colors.Secondary
    ToggleFrame.BorderSizePixel = 0
    ToggleFrame.Size = UDim2.new(1, -10, 0, 40)
    ToggleFrame.ZIndex = 5
    ToggleFrame.Visible = true
    
    local ToggleCorner = Instance.new("UICorner")
    ToggleCorner.CornerRadius = UDim.new(0, 6)
    ToggleCorner.Parent = ToggleFrame
    
    local ToggleButton = Instance.new("TextButton")
    ToggleButton.Name = "ToggleButton"
    ToggleButton.Parent = ToggleFrame
    ToggleButton.BackgroundTransparency = 1
    ToggleButton.Size = UDim2.new(1, 0, 1, 0)
    ToggleButton.Text = ""
    ToggleButton.ZIndex = 6
    ToggleButton.Visible = true
    
    local ToggleTitle = Instance.new("TextLabel")
    ToggleTitle.Name = "ToggleTitle"
    ToggleTitle.Parent = ToggleFrame
    ToggleTitle.BackgroundTransparency = 1
    ToggleTitle.Position = UDim2.new(0, 10, 0, 5)
    ToggleTitle.Size = UDim2.new(1, -50, 0, 15)
    ToggleTitle.Font = Config.Fonts.Medium
    ToggleTitle.Text = config.Name or "Toggle"
    ToggleTitle.TextColor3 = Config.Colors.Text
    ToggleTitle.TextSize = 12
    ToggleTitle.TextXAlignment = Enum.TextXAlignment.Left
    ToggleTitle.ZIndex = 6
    ToggleTitle.Visible = true
    
    local ToggleDesc = Instance.new("TextLabel")
    ToggleDesc.Name = "ToggleDesc"
    ToggleDesc.Parent = ToggleFrame
    ToggleDesc.BackgroundTransparency = 1
    ToggleDesc.Position = UDim2.new(0, 10, 0, 20)
    ToggleDesc.Size = UDim2.new(1, -50, 0, 15)
    ToggleDesc.Font = Config.Fonts.Regular
    ToggleDesc.Text = config.Description or ""
    ToggleDesc.TextColor3 = Config.Colors.TextDark
    ToggleDesc.TextSize = 10
    ToggleDesc.TextXAlignment = Enum.TextXAlignment.Left
    ToggleDesc.ZIndex = 6
    ToggleDesc.Visible = true
    
    local ToggleSwitch = Instance.new("Frame")
    ToggleSwitch.Name = "ToggleSwitch"
    ToggleSwitch.Parent = ToggleFrame
    ToggleSwitch.BackgroundColor3 = enabled and Config.Colors.Success or Color3.fromRGB(70, 70, 80)
    ToggleSwitch.BorderSizePixel = 0
    ToggleSwitch.Position = UDim2.new(1, -40, 0.5, -10)
    ToggleSwitch.Size = UDim2.new(0, 35, 0, 20)
    ToggleSwitch.ZIndex = 6
    ToggleSwitch.Visible = true
    
    local SwitchCorner = Instance.new("UICorner")
    SwitchCorner.CornerRadius = UDim.new(0, 10)
    SwitchCorner.Parent = ToggleSwitch
    
    local ToggleKnob = Instance.new("Frame")
    ToggleKnob.Name = "ToggleKnob"
    ToggleKnob.Parent = ToggleSwitch
    ToggleKnob.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    ToggleKnob.BorderSizePixel = 0
    ToggleKnob.Position = enabled and UDim2.new(0, 18, 0, 2) or UDim2.new(0, 2, 0, 2)
    ToggleKnob.Size = UDim2.new(0, 15, 0, 15)
    ToggleKnob.ZIndex = 7
    ToggleKnob.Visible = true
    
    local KnobCorner = Instance.new("UICorner")
    KnobCorner.CornerRadius = UDim.new(0, 8)
    KnobCorner.Parent = ToggleKnob
    
    ToggleButton.MouseButton1Click:Connect(function()
        enabled = not enabled
        local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad)
        TweenService:Create(ToggleSwitch, tweenInfo, {
            BackgroundColor3 = enabled and Config.Colors.Success or Color3.fromRGB(70, 70, 80)
        }):Play()
        TweenService:Create(ToggleKnob, tweenInfo, {
            Position = enabled and UDim2.new(0, 18, 0, 2) or UDim2.new(0, 2, 0, 2)
        }):Play()
        if config.Callback then config.Callback(enabled) end
    end)
    
    ToggleButton.MouseEnter:Connect(function()
        TweenService:Create(ToggleFrame, TweenInfo.new(0.2), {BackgroundColor3 = Config.Colors.Primary}):Play()
    end)
    
    ToggleButton.MouseLeave:Connect(function()
        TweenService:Create(ToggleFrame, TweenInfo.new(0.2), {BackgroundColor3 = Config.Colors.Secondary}):Play()
    end)
    
    table.insert(Tab.Elements, ToggleFrame)
    Tab.Content.Parent.CanvasSize = UDim2.new(0, 0, 0, Tab.Content.UIListLayout.AbsoluteContentSize.Y + 20)
    
    return {
        Frame = ToggleFrame,
        SetValue = function(value)
            enabled = value
            ToggleSwitch.BackgroundColor3 = enabled and Config.Colors.Success or Color3.fromRGB(70, 70, 80)
            ToggleKnob.Position = enabled and UDim2.new(0, 18, 0, 2) or UDim2.new(0, 2, 0, 2)
        end
    }
end

-- Create Slider
function PhantomHub:CreateSlider(Tab, config)
    local min = config.Min or 0
    local max = config.Max or 100
    local default = config.Default or min
    local currentValue = default
    
    local SliderFrame = Instance.new("Frame")
    SliderFrame.Name = "SliderFrame"
    SliderFrame.Parent = Tab.Content
    SliderFrame.BackgroundColor3 = Config.Colors.Secondary
    SliderFrame.BorderSizePixel = 0
    SliderFrame.Size = UDim2.new(1, -10, 0, 50)
    SliderFrame.ZIndex = 5
    SliderFrame.Visible = true
    
    local SliderCorner = Instance.new("UICorner")
    SliderCorner.CornerRadius = UDim.new(0, 6)
    SliderCorner.Parent = SliderFrame
    
    local SliderTitle = Instance.new("TextLabel")
    SliderTitle.Name = "SliderTitle"
    SliderTitle.Parent = SliderFrame
    SliderTitle.BackgroundTransparency = 1
    SliderTitle.Position = UDim2.new(0, 10, 0, 5)
    SliderTitle.Size = UDim2.new(0.6, 0, 0, 15)
    SliderTitle.Font = Config.Fonts.Medium
    SliderTitle.Text = config.Name or "Slider"
    SliderTitle.TextColor3 = Config.Colors.Text
    SliderTitle.TextSize = 12
    SliderTitle.TextXAlignment = Enum.TextXAlignment.Left
    SliderTitle.ZIndex = 6
    SliderTitle.Visible = true
    
    local ValueLabel = Instance.new("TextLabel")
    ValueLabel.Name = "ValueLabel"
    ValueLabel.Parent = SliderFrame
    ValueLabel.BackgroundTransparency = 1
    ValueLabel.Position = UDim2.new(0.6, 0, 0, 5)
    ValueLabel.Size = UDim2.new(0.4, -10, 0, 15)
    ValueLabel.Font = Config.Fonts.Bold
    ValueLabel.Text = tostring(currentValue)
    ValueLabel.TextColor3 = Config.Colors.Accent
    ValueLabel.TextSize = 12
    ValueLabel.TextXAlignment = Enum.TextXAlignment.Right
    ValueLabel.ZIndex = 6
    ValueLabel.Visible = true
    
    local SliderDesc = Instance.new("TextLabel")
    SliderDesc.Name = "SliderDesc"
    SliderDesc.Parent = SliderFrame
    SliderDesc.BackgroundTransparency = 1
    SliderDesc.Position = UDim2.new(0, 10, 0, 20)
    SliderDesc.Size = UDim2.new(1, -10, 0, 15)
    SliderDesc.Font = Config.Fonts.Regular
    SliderDesc.Text = config.Description or ""
    SliderDesc.TextColor3 = Config.Colors.TextDark
    SliderDesc.TextSize = 10
    SliderDesc.TextXAlignment = Enum.TextXAlignment.Left
    SliderDesc.ZIndex = 6
    SliderDesc.Visible = true
    
    local SliderTrack = Instance.new("Frame")
    SliderTrack.Name = "SliderTrack"
    SliderTrack.Parent = SliderFrame
    SliderTrack.BackgroundColor3 = Color3.fromRGB(70, 70, 80)
    SliderTrack.BorderSizePixel = 0
    SliderTrack.Position = UDim2.new(0, 10, 1, -15)
    SliderTrack.Size = UDim2.new(1, -20, 0, 6)
    SliderTrack.ZIndex = 6
    SliderTrack.Visible = true
    
    local TrackCorner = Instance.new("UICorner")
    TrackCorner.CornerRadius = UDim.new(0, 3)
    TrackCorner.Parent = SliderTrack
    
    local SliderFill = Instance.new("Frame")
    SliderFill.Name = "SliderFill"
    SliderFill.Parent = SliderTrack
    SliderFill.BackgroundColor3 = Config.Colors.Accent
    SliderFill.BorderSizePixel = 0
    SliderFill.Size = UDim2.new((currentValue - min) / (max - min), 0, 1, 0)
    SliderFill.ZIndex = 7
    SliderFill.Visible = true
    
    local FillCorner = Instance.new("UICorner")
    FillCorner.CornerRadius = UDim.new(0, 3)
    FillCorner.Parent = SliderFill
    
    local SliderButton = Instance.new("TextButton")
    SliderButton.Name = "SliderButton"
    SliderButton.Parent = SliderTrack
    SliderButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    SliderButton.BorderSizePixel = 0
    SliderButton.Position = UDim2.new((currentValue - min) / (max - min), -8, 0.5, -8)
    SliderButton.Size = UDim2.new(0, 16, 0, 16)
    SliderButton.Text = ""
    SliderButton.ZIndex = 8
    SliderButton.Visible = true
    
    local ButtonCorner = Instance.new("UICorner")
    ButtonCorner.CornerRadius = UDim.new(0, 8)
    ButtonCorner.Parent = SliderButton
    
    local dragging = false
    
    local function startSliderDrag(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
        end
    end
    
    local function updateSliderDrag(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local mousePos = UserInputService:GetMouseLocation()
            local relativePos = mousePos.X - SliderTrack.AbsolutePosition.X
            local percentage = math.clamp(relativePos / SliderTrack.AbsoluteSize.X, 0, 1)
            currentValue = math.floor(min + (max - min) * percentage)
            ValueLabel.Text = tostring(currentValue)
            SliderButton.Position = UDim2.new(percentage, -8, 0.5, -8)
            SliderFill.Size = UDim2.new(percentage, 0, 1, 0)
            if config.Callback then config.Callback(currentValue) end
        end
    end
    
    local function endSliderDrag(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end
    
    SliderButton.InputBegan:Connect(startSliderDrag)
    UserInputService.InputChanged:Connect(updateSliderDrag)
    UserInputService.InputEnded:Connect(endSliderDrag)
    
    table.insert(Tab.Elements, SliderFrame)
    Tab.Content.Parent.CanvasSize = UDim2.new(0, 0, 0, Tab.Content.UIListLayout.AbsoluteContentSize.Y + 20)
    
    return {
        Frame = SliderFrame,
        SetValue = function(value)
            currentValue = math.clamp(value, min, max)
            ValueLabel.Text = tostring(currentValue)
            local percentage = (currentValue - min) / (max - min)
            SliderButton.Position = UDim2.new(percentage, -8, 0.5, -8)
            SliderFill.Size = UDim2.new(percentage, 0, 1, 0)
        end
    }
end

-- Create TextBox
function PhantomHub:CreateTextBox(Tab, config)
    local TextBoxFrame = Instance.new("Frame")
    TextBoxFrame.Name = "TextBoxFrame"
    TextBoxFrame.Parent = Tab.Content
    TextBoxFrame.BackgroundColor3 = Config.Colors.Secondary
    TextBoxFrame.BorderSizePixel = 0
    TextBoxFrame.Size = UDim2.new(1, -10, 0, 40)
    TextBoxFrame.ZIndex = 5
    TextBoxFrame.Visible = true
    
    local TextBoxCorner = Instance.new("UICorner")
    TextBoxCorner.CornerRadius = UDim.new(0, 6)
    TextBoxCorner.Parent = TextBoxFrame
    
    local TextBoxTitle = Instance.new("TextLabel")
    TextBoxTitle.Name = "TextBoxTitle"
    TextBoxTitle.Parent = TextBoxFrame
    TextBoxTitle.BackgroundTransparency = 1
    TextBoxTitle.Position = UDim2.new(0, 10, 0, 5)
    TextBoxTitle.Size = UDim2.new(1, -10, 0, 15)
    TextBoxTitle.Font = Config.Fonts.Medium
    TextBoxTitle.Text = config.Name or "TextBox"
    TextBoxTitle.TextColor3 = Config.Colors.Text
    TextBoxTitle.TextSize = 12
    TextBoxTitle.TextXAlignment = Enum.TextXAlignment.Left
    TextBoxTitle.ZIndex = 6
    TextBoxTitle.Visible = true
    
    local TextBox = Instance.new("TextBox")
    TextBox.Name = "TextBox"
    TextBox.Parent = TextBoxFrame
    TextBox.BackgroundColor3 = Config.Colors.Primary
    TextBox.BorderSizePixel = 0
    TextBox.Position = UDim2.new(0, 10, 0, 20)
    TextBox.Size = UDim2.new(1, -20, 0, 15)
    TextBox.Font = Config.Fonts.Regular
    TextBox.PlaceholderText = config.PlaceholderText or "Enter text..."
    TextBox.Text = config.Default or ""
    TextBox.TextColor3 = Config.Colors.Text
    TextBox.TextSize = 10
    TextBox.TextXAlignment = Enum.TextXAlignment.Left
    TextBox.ClearTextOnFocus = false
    TextBox.ZIndex = 6
    TextBox.Visible = true
    
    local TextBoxInputCorner = Instance.new("UICorner")
    TextBoxInputCorner.CornerRadius = UDim.new(0, 5)
    TextBoxInputCorner.Parent = TextBox
    
    TextBox.FocusLost:Connect(function(enterPressed)
        if config.Callback then config.Callback(TextBox.Text) end
    end)
    
    table.insert(Tab.Elements, TextBoxFrame)
    Tab.Content.Parent.CanvasSize = UDim2.new(0, 0, 0, Tab.Content.UIListLayout.AbsoluteContentSize.Y + 20)
    
    return {
        Frame = TextBoxFrame,
        SetText = function(text)
            TextBox.Text = text
        end,
        GetText = function()
            return TextBox.Text
        end
    }
end

-- Create Dropdown
function PhantomHub:CreateDropdown(Tab, config)
    local options = config.Options or {"Option 1", "Option 2"}
    local selected = config.Default or options[1]
    local isOpen = false
    
    local DropdownFrame = Instance.new("Frame")
    DropdownFrame.Name = "DropdownFrame"
    DropdownFrame.Parent = Tab.Content
    DropdownFrame.BackgroundColor3 = Config.Colors.Secondary
    DropdownFrame.BorderSizePixel = 0
    DropdownFrame.Size = UDim2.new(1, -10, 0, 40)
    DropdownFrame.ClipsDescendants = true
    DropdownFrame.ZIndex = 5
    DropdownFrame.Visible = true
    
    local DropdownCorner = Instance.new("UICorner")
    DropdownCorner.CornerRadius = UDim.new(0, 6)
    DropdownCorner.Parent = DropdownFrame
    
    local DropdownTitle = Instance.new("TextLabel")
    DropdownTitle.Name = "DropdownTitle"
    DropdownTitle.Parent = DropdownFrame
    DropdownTitle.BackgroundTransparency = 1
    DropdownTitle.Position = UDim2.new(0, 10, 0, 5)
    DropdownTitle.Size = UDim2.new(1, -10, 0, 15)
    DropdownTitle.Font = Config.Fonts.Medium
    DropdownTitle.Text = config.Name or "Dropdown"
    DropdownTitle.TextColor3 = Config.Colors.Text
    DropdownTitle.TextSize = 12
    DropdownTitle.TextXAlignment = Enum.TextXAlignment.Left
    DropdownTitle.ZIndex = 6
    DropdownTitle.Visible = true
    
    local DropdownButton = Instance.new("TextButton")
    DropdownButton.Name = "DropdownButton"
    DropdownButton.Parent = DropdownFrame
    DropdownButton.BackgroundColor3 = Config.Colors.Primary
    DropdownButton.BorderSizePixel = 0
    DropdownButton.Position = UDim2.new(0, 10, 0, 20)
    DropdownButton.Size = UDim2.new(1, -20, 0, 15)
    DropdownButton.Font = Config.Fonts.Regular
    DropdownButton.Text = selected
    DropdownButton.TextColor3 = Config.Colors.Text
    DropdownButton.TextSize = 10
    DropdownButton.TextXAlignment = Enum.TextXAlignment.Left
    DropdownButton.ZIndex = 6
    DropdownButton.Visible = true
    
    local DropdownButtonCorner = Instance.new("UICorner")
    DropdownButtonCorner.CornerRadius = UDim.new(0, 5)
    DropdownButtonCorner.Parent = DropdownButton
    
    local DropdownArrow = Instance.new("TextLabel")
    DropdownArrow.Name = "DropdownArrow"
    DropdownArrow.Parent = DropdownButton
    DropdownArrow.BackgroundTransparency = 1
    DropdownArrow.Position = UDim2.new(1, -20, 0, 0)
    DropdownArrow.Size = UDim2.new(0, 15, 1, 0)
    DropdownArrow.Font = Config.Fonts.Bold
    DropdownArrow.Text = "▼"
    DropdownArrow.TextColor3 = Config.Colors.TextDark
    DropdownArrow.TextSize = 10
    DropdownArrow.ZIndex = 7
    DropdownArrow.Visible = true
    
    local OptionsContainer = Instance.new("ScrollingFrame")
    OptionsContainer.Name = "OptionsContainer"
    OptionsContainer.Parent = DropdownFrame
    OptionsContainer.BackgroundTransparency = 1
    OptionsContainer.BorderSizePixel = 0
    OptionsContainer.Position = UDim2.new(0, 10, 0, 40)
    OptionsContainer.Size = UDim2.new(1, -20, 0, 0)
    OptionsContainer.ScrollBarThickness = 3
    OptionsContainer.ScrollBarImageColor3 = Config.Colors.Accent
    OptionsContainer.ZIndex = 6
    OptionsContainer.Visible = true
    
    local OptionsListLayout = Instance.new("UIListLayout")
    OptionsListLayout.Parent = OptionsContainer
    OptionsListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    
    for i, option in pairs(options) do
        local OptionButton = Instance.new("TextButton")
        OptionButton.Name = "Option_" .. i
        OptionButton.Parent = OptionsContainer
        OptionButton.BackgroundColor3 = Config.Colors.Primary
        OptionButton.BorderSizePixel = 0
        OptionButton.Size = UDim2.new(1, 0, 0, 25)
        OptionButton.Font = Config.Fonts.Regular
        OptionButton.Text = option
        OptionButton.TextColor3 = Config.Colors.Text
        OptionButton.TextSize = 10
        OptionButton.TextXAlignment = Enum.TextXAlignment.Left
        OptionButton.ZIndex = 7
        OptionButton.Visible = true
        
        local OptionCorner = Instance.new("UICorner")
        OptionCorner.CornerRadius = UDim.new(0, 5)
        OptionCorner.Parent = OptionButton
        
        OptionButton.MouseButton1Click:Connect(function()
            selected = option
            DropdownButton.Text = selected
            isOpen = false
            TweenService:Create(DropdownFrame, TweenInfo.new(0.3), {Size = UDim2.new(1, -10, 0, 40)}):Play()
            TweenService:Create(OptionsContainer, TweenInfo.new(0.3), {Size = UDim2.new(1, -20, 0, 0)}):Play()
            TweenService:Create(DropdownArrow, TweenInfo.new(0.3), {Rotation = 0}):Play()
            if config.Callback then config.Callback(selected) end
            Tab.Content.Parent.CanvasSize = UDim2.new(0, 0, 0, Tab.Content.UIListLayout.AbsoluteContentSize.Y + 20)
        end)
        
        OptionButton.MouseEnter:Connect(function()
            TweenService:Create(OptionButton, TweenInfo.new(0.2), {BackgroundColor3 = Config.Colors.Accent}):Play()
        end)
        
        OptionButton.MouseLeave:Connect(function()
            TweenService:Create(OptionButton, TweenInfo.new(0.2), {BackgroundColor3 = Config.Colors.Primary}):Play()
        end)
    end
    
    OptionsContainer.CanvasSize = UDim2.new(0, 0, 0, OptionsListLayout.AbsoluteContentSize.Y)
    
    DropdownButton.MouseButton1Click:Connect(function()
        isOpen = not isOpen
        local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad)
        local optionsHeight = math.min(#options * 25, 100)
        if isOpen then
            TweenService:Create(DropdownFrame, tweenInfo, {Size = UDim2.new(1, -10, 0, 40 + optionsHeight)}):Play()
            TweenService:Create(OptionsContainer, tweenInfo, {Size = UDim2.new(1, -20, 0, optionsHeight)}):Play()
            TweenService:Create(DropdownArrow, tweenInfo, {Rotation = 180}):Play()
        else
            TweenService:Create(DropdownFrame, tweenInfo, {Size = UDim2.new(1, -10, 0, 40)}):Play()
            TweenService:Create(OptionsContainer, tweenInfo, {Size = UDim2.new(1, -20, 0, 0)}):Play()
            TweenService:Create(DropdownArrow, tweenInfo, {Rotation = 0}):Play()
        end
        Tab.Content.Parent.CanvasSize = UDim2.new(0, 0, 0, Tab.Content.UIListLayout.AbsoluteContentSize.Y + 20)
    end)
    
    table.insert(Tab.Elements, DropdownFrame)
    Tab.Content.Parent.CanvasSize = UDim2.new(0, 0, 0, Tab.Content.UIListLayout.AbsoluteContentSize.Y + 20)
    
    return {
        Frame = DropdownFrame,
        SetValue = function(value)
            selected = value
            DropdownButton.Text = selected
        end,
        GetValue = function()
            return selected
        end
    }
end

-- Example Usage
local Window = PhantomHub:CreateWindow({
    HubName = "PHANTOM HUB"
})

local HomeTab = PhantomHub:CreateTab(Window, {
    Name = "Home",
    Icon = "🏠"
})

local ExecutorTab = PhantomHub:CreateTab(Window, {
    Name = "Executor",
    Icon = "⚡"
})

local FeaturesTab = PhantomHub:CreateTab(Window, {
    Name = "Features",
    Icon = "🎯"
})

local SpawnerTab = PhantomHub:CreateTab(Window, {
    Name = "Spawner",
    Icon = "📦"
})

local SettingsTab = PhantomHub:CreateTab(Window, {
    Name = "Settings",
    Icon = "⚙️"
})

-- Home Tab Elements
PhantomHub:CreateLabel(HomeTab, {
    Text = "Welcome to Phantom Hub!",
    Color = Config.Colors.Accent,
    Size = 14
})

PhantomHub:CreateLabel(HomeTab, {
    Text = "Compact script hub for Roblox",
    Color = Config.Colors.TextDark,
    Size = 12
})

-- Executor Tab Elements
PhantomHub:CreateToggle(ExecutorTab, {
    Name = "Speed Hack",
    Description = "Boost speed",
    Default = false,
    Callback = function(enabled)
        if enabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.WalkSpeed = 100
        elseif LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.WalkSpeed = 16
        end
    end
})

PhantomHub:CreateToggle(ExecutorTab, {
    Name = "Jump Boost",
    Description = "Higher jumps",
    Default = false,
    Callback = function(enabled)
        if enabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.JumpPower = 200
        elseif LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.JumpPower = 50
        end
    end
})

PhantomHub:CreateButton(ExecutorTab, {
    Name = "Fly Mode",
    Description = "Toggle flight",
    Callback = function(active)
        print("Fly mode:", active)
    end
})

-- Features Tab Elements
PhantomHub:CreateSlider(FeaturesTab, {
    Name = "Speed Multiplier",
    Description = "Adjust speed",
    Min = 16,
    Max = 200,
    Default = 16,
    Callback = function(value)
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
            LocalPlayer.Character.Humanoid.WalkSpeed = value
        end
    end
})

PhantomHub:CreateTextBox(FeaturesTab, {
    Name = "Custom Message",
    PlaceholderText = "Type message...",
    Default = "",
    Callback = function(text)
        print("Message:", text)
    end
})

PhantomHub:CreateDropdown(FeaturesTab, {
    Name = "Teleport Location",
    Options = {"Spawn", "Shop", "Arena", "Boss Room"},
    Default = "Spawn",
    Callback = function(selected)
        print("Teleporting to:", selected)
    end
})

-- Spawner Tab Elements
PhantomHub:CreateButton(SpawnerTab, {
    Name = "Money Generator",
    Description = "Spawn currency",
    Callback = function(active)
        print("Money generator:", active)
    end
})

PhantomHub:CreateButton(SpawnerTab, {
    Name = "Item Spawner",
    Description = "Create items",
    Callback = function(active)
        print("Item spawner:", active)
    end
})

-- Settings Tab Elements
PhantomHub:CreateLabel(SettingsTab, {
    Text = "UI Settings",
    Color = Config.Colors.Accent,
    Size = 14
})

PhantomHub:CreateDropdown(SettingsTab, {
    Name = "Theme",
    Options = {"Dark", "Light", "Blue", "Purple"},
    Default = "Dark",
    Callback = function(theme)
        print("Theme changed to:", theme)
    end
})

print("🚀 Phantom Hub v2.4 loaded successfully!")
print("📱 Tab components fixed for visibility in compact design!")
