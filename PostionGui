-- Modern Hub GUI for Roblox Executor
-- Compatible with Fryzer Circle Toggle

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Remove existing GUI if it exists
if PlayerGui:FindFirstChild("ModernHubGUI") then
    PlayerGui:FindFirstChild("ModernHubGUI"):Destroy()
end

-- Configuration
local Config = {
    Colors = {
        Primary = Color3.fromRGB(15, 15, 20),
        Secondary = Color3.fromRGB(25, 25, 35),
        Accent = Color3.fromRGB(88, 101, 242),
        AccentHover = Color3.fromRGB(104, 117, 255),
        Success = Color3.fromRGB(67, 181, 129),
        Text = Color3.fromRGB(255, 255, 255),
        TextSecondary = Color3.fromRGB(180, 180, 190),
        Border = Color3.fromRGB(45, 45, 55),
        Shadow = Color3.fromRGB(0, 0, 0),
        TabActive = Color3.fromRGB(70, 85, 220),
        Warning = Color3.fromRGB(255, 140, 66),
        Error = Color3.fromRGB(237, 66, 69)
    },
    Animations = {
        Fast = TweenInfo.new(0.15, Enum.EasingStyle.Quad),
        Normal = TweenInfo.new(0.3, Enum.EasingStyle.Quad),
        Slow = TweenInfo.new(0.5, Enum.EasingStyle.Quad),
        Bounce = TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
    }
}

-- Create Library
local Library = {}
Library.Tabs = {}
Library.CurrentTab = nil

-- Create Main ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ModernHubGUI"
ScreenGui.Parent = PlayerGui
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.DisplayOrder = 100

-- Create Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Config.Colors.Primary
MainFrame.BorderSizePixel = 0
MainFrame.Size = UDim2.new(0, 800, 0, 500)
MainFrame.Position = UDim2.new(0.5, -400, 0.5, -250)
MainFrame.Active = true
MainFrame.Draggable = true

-- Add corner rounding
local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = MainFrame

-- Add border
local MainStroke = Instance.new("UIStroke")
MainStroke.Color = Config.Colors.Border
MainStroke.Thickness = 1
MainStroke.Parent = MainFrame

-- Create Shadow
local Shadow = Instance.new("Frame")
Shadow.Name = "Shadow"
Shadow.Parent = ScreenGui
Shadow.BackgroundColor3 = Config.Colors.Shadow
Shadow.BackgroundTransparency = 0.8
Shadow.BorderSizePixel = 0
Shadow.Size = UDim2.new(0, 810, 0, 510)
Shadow.Position = UDim2.new(0.5, -405, 0.5, -255)
Shadow.ZIndex = MainFrame.ZIndex - 1

local ShadowCorner = Instance.new("UICorner")
ShadowCorner.CornerRadius = UDim.new(0, 12)
ShadowCorner.Parent = Shadow

-- Header Frame
local HeaderFrame = Instance.new("Frame")
HeaderFrame.Name = "Header"
HeaderFrame.Parent = MainFrame
HeaderFrame.BackgroundColor3 = Config.Colors.Secondary
HeaderFrame.BorderSizePixel = 0
HeaderFrame.Size = UDim2.new(1, 0, 0, 50)
HeaderFrame.Position = UDim2.new(0, 0, 0, 0)

local HeaderCorner = Instance.new("UICorner")
HeaderCorner.CornerRadius = UDim.new(0, 12)
HeaderCorner.Parent = HeaderFrame

-- Fix header corners (only top corners rounded)
local HeaderFix = Instance.new("Frame")
HeaderFix.Parent = HeaderFrame
HeaderFix.BackgroundColor3 = Config.Colors.Secondary
HeaderFix.BorderSizePixel = 0
HeaderFix.Size = UDim2.new(1, 0, 0, 12)
HeaderFix.Position = UDim2.new(0, 0, 1, -12)

-- Title Label
local TitleLabel = Instance.new("TextLabel")
TitleLabel.Name = "Title"
TitleLabel.Parent = HeaderFrame
TitleLabel.BackgroundTransparency = 1
TitleLabel.Size = UDim2.new(1, -100, 1, 0)
TitleLabel.Position = UDim2.new(0, 15, 0, 0)
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.Text = "MODERN HUB"
TitleLabel.TextColor3 = Config.Colors.Text
TitleLabel.TextSize = 18
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Subtitle Label
local SubtitleLabel = Instance.new("TextLabel")
SubtitleLabel.Name = "Subtitle"
SubtitleLabel.Parent = HeaderFrame
SubtitleLabel.BackgroundTransparency = 1
SubtitleLabel.Size = UDim2.new(1, -100, 0, 15)
SubtitleLabel.Position = UDim2.new(0, 15, 0, 28)
SubtitleLabel.Font = Enum.Font.Gotham
SubtitleLabel.Text = "Advanced Script Hub"
SubtitleLabel.TextColor3 = Config.Colors.TextSecondary
SubtitleLabel.TextSize = 12
SubtitleLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Control Buttons Container
local ControlsFrame = Instance.new("Frame")
ControlsFrame.Name = "Controls"
ControlsFrame.Parent = HeaderFrame
ControlsFrame.BackgroundTransparency = 1
ControlsFrame.Size = UDim2.new(0, 80, 1, 0)
ControlsFrame.Position = UDim2.new(1, -85, 0, 0)

-- Minimize Button
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Parent = ControlsFrame
MinimizeButton.BackgroundTransparency = 1
MinimizeButton.Size = UDim2.new(0, 35, 0, 35)
MinimizeButton.Position = UDim2.new(0, 0, 0.5, -17.5)
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.Text = "‚àí"
MinimizeButton.TextColor3 = Config.Colors.Text
MinimizeButton.TextSize = 20

-- Close Button
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Parent = ControlsFrame
CloseButton.BackgroundTransparency = 1
CloseButton.Size = UDim2.new(0, 35, 0, 35)
CloseButton.Position = UDim2.new(0, 40, 0.5, -17.5)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Text = "√ó"
CloseButton.TextColor3 = Config.Colors.Text
CloseButton.TextSize = 20

-- Content Container
local ContentFrame = Instance.new("Frame")
ContentFrame.Name = "Content"
ContentFrame.Parent = MainFrame
ContentFrame.BackgroundTransparency = 1
ContentFrame.Size = UDim2.new(1, 0, 1, -50)
ContentFrame.Position = UDim2.new(0, 0, 0, 50)

-- Left Sidebar for Tabs
local SidebarFrame = Instance.new("Frame")
SidebarFrame.Name = "Sidebar"
SidebarFrame.Parent = ContentFrame
SidebarFrame.BackgroundColor3 = Config.Colors.Secondary
SidebarFrame.BorderSizePixel = 0
SidebarFrame.Size = UDim2.new(0, 180, 1, 0)
SidebarFrame.Position = UDim2.new(0, 0, 0, 0)

-- Sidebar ScrollingFrame
local TabScrollFrame = Instance.new("ScrollingFrame")
TabScrollFrame.Name = "TabScroll"
TabScrollFrame.Parent = SidebarFrame
TabScrollFrame.BackgroundTransparency = 1
TabScrollFrame.Size = UDim2.new(1, -10, 1, -10)
TabScrollFrame.Position = UDim2.new(0, 5, 0, 5)
TabScrollFrame.ScrollBarThickness = 4
TabScrollFrame.ScrollBarImageColor3 = Config.Colors.Accent
TabScrollFrame.BorderSizePixel = 0
TabScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)

-- Tab Layout
local TabLayout = Instance.new("UIListLayout")
TabLayout.Parent = TabScrollFrame
TabLayout.SortOrder = Enum.SortOrder.LayoutOrder
TabLayout.Padding = UDim.new(0, 5)

-- Right Content Area
local ContentContainer = Instance.new("Frame")
ContentContainer.Name = "ContentContainer"
ContentContainer.Parent = ContentFrame
ContentContainer.BackgroundColor3 = Config.Colors.Primary
ContentContainer.BorderSizePixel = 0
ContentContainer.Size = UDim2.new(1, -180, 1, 0)
ContentContainer.Position = UDim2.new(0, 180, 0, 0)

-- Content ScrollingFrame
local ContentScrollFrame = Instance.new("ScrollingFrame")
ContentScrollFrame.Name = "ContentScroll"
ContentScrollFrame.Parent = ContentContainer
ContentScrollFrame.BackgroundTransparency = 1
ContentScrollFrame.Size = UDim2.new(1, -20, 1, -20)
ContentScrollFrame.Position = UDim2.new(0, 10, 0, 10)
ContentScrollFrame.ScrollBarThickness = 4
ContentScrollFrame.ScrollBarImageColor3 = Config.Colors.Accent
ContentScrollFrame.BorderSizePixel = 0
ContentScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)

-- Content Layout
local ContentLayout = Instance.new("UIListLayout")
ContentLayout.Parent = ContentScrollFrame
ContentLayout.SortOrder = Enum.SortOrder.LayoutOrder
ContentLayout.Padding = UDim.new(0, 10)

-- Functions
function Library:CreateTab(name, icon)
    local Tab = {}
    Tab.Name = name
    Tab.Components = {}
    
    -- Create Tab Button
    local TabButton = Instance.new("TextButton")
    TabButton.Name = name
    TabButton.Parent = TabScrollFrame
    TabButton.BackgroundColor3 = Config.Colors.Primary
    TabButton.BorderSizePixel = 0
    TabButton.Size = UDim2.new(1, 0, 0, 40)
    TabButton.Font = Enum.Font.Gotham
    TabButton.Text = (icon and icon .. " " or "") .. name
    TabButton.TextColor3 = Config.Colors.TextSecondary
    TabButton.TextSize = 14
    TabButton.TextXAlignment = Enum.TextXAlignment.Left
    TabButton.TextXOffset = 15
    
    local TabCorner = Instance.new("UICorner")
    TabCorner.CornerRadius = UDim.new(0, 8)
    TabCorner.Parent = TabButton
    
    -- Create Tab Content Frame
    local TabContent = Instance.new("Frame")
    TabContent.Name = name .. "Content"
    TabContent.Parent = ContentScrollFrame
    TabContent.BackgroundTransparency = 1
    TabContent.Size = UDim2.new(1, 0, 0, 0)
    TabContent.Visible = false
    
    local TabContentLayout = Instance.new("UIListLayout")
    TabContentLayout.Parent = TabContent
    TabContentLayout.SortOrder = Enum.SortOrder.LayoutOrder
    TabContentLayout.Padding = UDim.new(0, 10)
    
    -- Tab Selection Logic
    TabButton.MouseButton1Click:Connect(function()
        Library:SelectTab(Tab)
    end)
    
    -- Hover Effects
    TabButton.MouseEnter:Connect(function()
        if Library.CurrentTab ~= Tab then
            TweenService:Create(TabButton, Config.Animations.Fast, {
                BackgroundColor3 = Config.Colors.Border,
                TextColor3 = Config.Colors.Text
            }):Play()
        end
    end)
    
    TabButton.MouseLeave:Connect(function()
        if Library.CurrentTab ~= Tab then
            TweenService:Create(TabButton, Config.Animations.Fast, {
                BackgroundColor3 = Config.Colors.Primary,
                TextColor3 = Config.Colors.TextSecondary
            }):Play()
        end
    end)
    
    Tab.Button = TabButton
    Tab.Content = TabContent
    Tab.Layout = TabContentLayout
    
    table.insert(Library.Tabs, Tab)
    
    -- Auto-select first tab
    if #Library.Tabs == 1 then
        Library:SelectTab(Tab)
    end
    
    -- Update canvas size
    TabScrollFrame.CanvasSize = UDim2.new(0, 0, 0, TabLayout.AbsoluteContentSize.Y)
    TabLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        TabScrollFrame.CanvasSize = UDim2.new(0, 0, 0, TabLayout.AbsoluteContentSize.Y)
    end)
    
    return Tab
end

function Library:SelectTab(tab)
    -- Deselect current tab
    if Library.CurrentTab then
        TweenService:Create(Library.CurrentTab.Button, Config.Animations.Normal, {
            BackgroundColor3 = Config.Colors.Primary,
            TextColor3 = Config.Colors.TextSecondary
        }):Play()
        Library.CurrentTab.Content.Visible = false
    end
    
    -- Select new tab
    Library.CurrentTab = tab
    TweenService:Create(tab.Button, Config.Animations.Normal, {
        BackgroundColor3 = Config.Colors.TabActive,
        TextColor3 = Config.Colors.Text
    }):Play()
    tab.Content.Visible = true
    
    -- Update content canvas size
    ContentScrollFrame.CanvasSize = UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y)
end

-- Component Creation Functions
function Library:CreateButton(tab, text, callback)
    local Button = Instance.new("TextButton")
    Button.Name = text
    Button.Parent = tab.Content
    Button.BackgroundColor3 = Config.Colors.Secondary
    Button.BorderSizePixel = 0
    Button.Size = UDim2.new(1, 0, 0, 35)
    Button.Font = Enum.Font.Gotham
    Button.Text = text
    Button.TextColor3 = Config.Colors.Text
    Button.TextSize = 14
    
    local ButtonCorner = Instance.new("UICorner")
    ButtonCorner.CornerRadius = UDim.new(0, 6)
    ButtonCorner.Parent = Button
    
    -- Status indicator
    local StatusBox = Instance.new("Frame")
    StatusBox.Name = "StatusBox"
    StatusBox.Parent = Button
    StatusBox.BackgroundColor3 = Config.Colors.Border
    StatusBox.BorderSizePixel = 0
    StatusBox.Size = UDim2.new(0, 20, 0, 20)
    StatusBox.Position = UDim2.new(1, -30, 0.5, -10)
    
    local StatusCorner = Instance.new("UICorner")
    StatusCorner.CornerRadius = UDim.new(0, 4)
    StatusCorner.Parent = StatusBox
    
    -- Button functionality
    Button.MouseButton1Click:Connect(function()
        -- Green flash effect
        TweenService:Create(StatusBox, Config.Animations.Fast, {
            BackgroundColor3 = Config.Colors.Success
        }):Play()
        
        -- Call callback if provided
        if callback then
            callback()
        end
        
        -- Return to normal after 1 second
        wait(1)
        TweenService:Create(StatusBox, Config.Animations.Normal, {
            BackgroundColor3 = Config.Colors.Border
        }):Play()
    end)
    
    -- Hover effects
    Button.MouseEnter:Connect(function()
        TweenService:Create(Button, Config.Animations.Fast, {
            BackgroundColor3 = Config.Colors.Border
        }):Play()
    end)
    
    Button.MouseLeave:Connect(function()
        TweenService:Create(Button, Config.Animations.Fast, {
            BackgroundColor3 = Config.Colors.Secondary
        }):Play()
    end)
    
    -- Update content size
    tab.Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        ContentScrollFrame.CanvasSize = UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y)
    end)
    
    return Button
end

function Library:CreateToggle(tab, text, default, callback)
    local Toggle = Instance.new("Frame")
    Toggle.Name = text
    Toggle.Parent = tab.Content
    Toggle.BackgroundColor3 = Config.Colors.Secondary
    Toggle.BorderSizePixel = 0
    Toggle.Size = UDim2.new(1, 0, 0, 35)
    
    local ToggleCorner = Instance.new("UICorner")
    ToggleCorner.CornerRadius = UDim.new(0, 6)
    ToggleCorner.Parent = Toggle
    
    local ToggleLabel = Instance.new("TextLabel")
    ToggleLabel.Parent = Toggle
    ToggleLabel.BackgroundTransparency = 1
    ToggleLabel.Size = UDim2.new(1, -60, 1, 0)
    ToggleLabel.Position = UDim2.new(0, 15, 0, 0)
    ToggleLabel.Font = Enum.Font.Gotham
    ToggleLabel.Text = text
    ToggleLabel.TextColor3 = Config.Colors.Text
    ToggleLabel.TextSize = 14
    ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left
    
    local ToggleButton = Instance.new("TextButton")
    ToggleButton.Parent = Toggle
    ToggleButton.BackgroundTransparency = 1
    ToggleButton.Size = UDim2.new(1, 0, 1, 0)
    ToggleButton.Text = ""
    
    local StatusBox = Instance.new("Frame")
    StatusBox.Name = "StatusBox"
    StatusBox.Parent = Toggle
    StatusBox.BackgroundColor3 = default and Config.Colors.Success or Config.Colors.Border
    StatusBox.BorderSizePixel = 0
    StatusBox.Size = UDim2.new(0, 20, 0, 20)
    StatusBox.Position = UDim2.new(1, -30, 0.5, -10)
    
    local StatusCorner = Instance.new("UICorner")
    StatusCorner.CornerRadius = UDim.new(0, 4)
    StatusCorner.Parent = StatusBox
    
    local isToggled = default or false
    
    ToggleButton.MouseButton1Click:Connect(function()
        isToggled = not isToggled
        
        TweenService:Create(StatusBox, Config.Animations.Normal, {
            BackgroundColor3 = isToggled and Config.Colors.Success or Config.Colors.Border
        }):Play()
        
        if callback then
            callback(isToggled)
        end
    end)
    
    -- Hover effects
    ToggleButton.MouseEnter:Connect(function()
        TweenService:Create(Toggle, Config.Animations.Fast, {
            BackgroundColor3 = Config.Colors.Border
        }):Play()
    end)
    
    ToggleButton.MouseLeave:Connect(function()
        TweenService:Create(Toggle, Config.Animations.Fast, {
            BackgroundColor3 = Config.Colors.Secondary
        }):Play()
    end)
    
    -- Update content size
    tab.Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        ContentScrollFrame.CanvasSize = UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y)
    end)
    
    return {Toggle = Toggle, SetValue = function(value) isToggled = value StatusBox.BackgroundColor3 = value and Config.Colors.Success or Config.Colors.Border end}
end

function Library:CreateSlider(tab, text, min, max, default, callback)
    local SliderFrame = Instance.new("Frame")
    SliderFrame.Name = text
    SliderFrame.Parent = tab.Content
    SliderFrame.BackgroundColor3 = Config.Colors.Secondary
    SliderFrame.BorderSizePixel = 0
    SliderFrame.Size = UDim2.new(1, 0, 0, 50)
    
    local SliderCorner = Instance.new("UICorner")
    SliderCorner.CornerRadius = UDim.new(0, 6)
    SliderCorner.Parent = SliderFrame
    
    local SliderLabel = Instance.new("TextLabel")
    SliderLabel.Parent = SliderFrame
    SliderLabel.BackgroundTransparency = 1
    SliderLabel.Size = UDim2.new(0.5, -10, 0, 25)
    SliderLabel.Position = UDim2.new(0, 15, 0, 5)
    SliderLabel.Font = Enum.Font.Gotham
    SliderLabel.Text = text
    SliderLabel.TextColor3 = Config.Colors.Text
    SliderLabel.TextSize = 14
    SliderLabel.TextXAlignment = Enum.TextXAlignment.Left
    
    local ValueLabel = Instance.new("TextLabel")
    ValueLabel.Parent = SliderFrame
    ValueLabel.BackgroundTransparency = 1
    ValueLabel.Size = UDim2.new(0.5, -10, 0, 25)
    ValueLabel.Position = UDim2.new(0.5, 0, 0, 5)
    ValueLabel.Font = Enum.Font.GothamBold
    ValueLabel.Text = tostring(default)
    ValueLabel.TextColor3 = Config.Colors.Accent
    ValueLabel.TextSize = 14
    ValueLabel.TextXAlignment = Enum.TextXAlignment.Right
    
    local SliderTrack = Instance.new("Frame")
    SliderTrack.Parent = SliderFrame
    SliderTrack.BackgroundColor3 = Config.Colors.Border
    SliderTrack.BorderSizePixel = 0
    SliderTrack.Size = UDim2.new(1, -30, 0, 4)
    SliderTrack.Position = UDim2.new(0, 15, 1, -15)
    
    local TrackCorner = Instance.new("UICorner")
    TrackCorner.CornerRadius = UDim.new(0, 2)
    TrackCorner.Parent = SliderTrack
    
    local SliderFill = Instance.new("Frame")
    SliderFill.Parent = SliderTrack
    SliderFill.BackgroundColor3 = Config.Colors.Accent
    SliderFill.BorderSizePixel = 0
    SliderFill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
    
    local FillCorner = Instance.new("UICorner")
    FillCorner.CornerRadius = UDim.new(0, 2)
    FillCorner.Parent = SliderFill
    
    local SliderHandle = Instance.new("Frame")
    SliderHandle.Parent = SliderTrack
    SliderHandle.BackgroundColor3 = Config.Colors.Text
    SliderHandle.BorderSizePixel = 0
    SliderHandle.Size = UDim2.new(0, 12, 0, 12)
    SliderHandle.Position = UDim2.new((default - min) / (max - min), -6, 0.5, -6)
    
    local HandleCorner = Instance.new("UICorner")
    HandleCorner.CornerRadius = UDim.new(0.5, 0)
    HandleCorner.Parent = SliderHandle
    
    local currentValue = default
    local dragging = false
    
    local function UpdateSlider(value)
        currentValue = math.clamp(value, min, max)
        local percentage = (currentValue - min) / (max - min)
        
        TweenService:Create(SliderFill, Config.Animations.Fast, {Size = UDim2.new(percentage, 0, 1, 0)}):Play()
        TweenService:Create(SliderHandle, Config.Animations.Fast, {Position = UDim2.new(percentage, -6, 0.5, -6)}):Play()
        
        ValueLabel.Text = tostring(math.floor(currentValue * 100) / 100)
        
        if callback then
            callback(currentValue)
        end
    end
    
    SliderTrack.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            
            local function Update()
                local mousePos = UserInputService:GetMouseLocation()
                local percentage = math.clamp((mousePos.X - SliderTrack.AbsolutePosition.X) / SliderTrack.AbsoluteSize.X, 0, 1)
                local value = min + (max - min) * percentage
                UpdateSlider(value)
            end
            
            Update()
            
            local connection
            connection = UserInputService.InputChanged:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
                    Update()
                end
            end)
            
            UserInputService.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    dragging = false
                    connection:Disconnect()
                end
            end)
        end
    end)
    
    -- Update content size
    tab.Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        ContentScrollFrame.CanvasSize = UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y)
    end)
    
    return {Slider = SliderFrame, SetValue = UpdateSlider}
end

function Library:CreateTextBox(tab, text, placeholder, callback)
    local TextBoxFrame = Instance.new("Frame")
    TextBoxFrame.Name = text
    TextBoxFrame.Parent = tab.Content
    TextBoxFrame.BackgroundColor3 = Config.Colors.Secondary
    TextBoxFrame.BorderSizePixel = 0
    TextBoxFrame.Size = UDim2.new(1, 0, 0, 50)
    
    local TextBoxCorner = Instance.new("UICorner")
    TextBoxCorner.CornerRadius = UDim.new(0, 6)
    TextBoxCorner.Parent = TextBoxFrame
    
    local TextBoxLabel = Instance.new("TextLabel")
    TextBoxLabel.Parent = TextBoxFrame
    TextBoxLabel.BackgroundTransparency = 1
    TextBoxLabel.Size = UDim2.new(1, -15, 0, 25)
    TextBoxLabel.Position = UDim2.new(0, 15, 0, 5)
    TextBoxLabel.Font = Enum.Font.Gotham
    TextBoxLabel.Text = text
    TextBoxLabel.TextColor3 = Config.Colors.Text
    TextBoxLabel.TextSize = 14
    TextBoxLabel.TextXAlignment = Enum.TextXAlignment.Left
    
    local TextBox = Instance.new("TextBox")
    TextBox.Parent = TextBoxFrame
    TextBox.BackgroundColor3 = Config.Colors.Primary
    TextBox.BorderSizePixel = 0
    TextBox.Size = UDim2.new(1, -30, 0, 20)
    TextBox.Position = UDim2.new(0, 15, 1, -25)
    TextBox.Font = Enum.Font.Gotham
    TextBox.PlaceholderText = placeholder
    TextBox.PlaceholderColor3 = Config.Colors.TextSecondary
    TextBox.Text = ""
    TextBox.TextColor3 = Config.Colors.Text
    TextBox.TextSize = 12
    TextBox.TextXAlignment = Enum.TextXAlignment.Left
    
    local TextBoxInputCorner = Instance.new("UICorner")
    TextBoxInputCorner.CornerRadius = UDim.new(0, 4)
    TextBoxInputCorner.Parent = TextBox
    
    if callback then
        TextBox.FocusLost:Connect(function(enterPressed)
            if enterPressed then
                callback(TextBox.Text)
            end
        end)
    end
    
    -- Update content size
    tab.Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        ContentScrollFrame.CanvasSize = UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y)
    end)
    
    return {TextBox = TextBoxFrame, GetValue = function() return TextBox.Text end}
end

function Library:CreateDropdown(tab, text, options, default, callback)
    local DropdownFrame = Instance.new("Frame")
    DropdownFrame.Name = text
    DropdownFrame.Parent = tab.Content
    DropdownFrame.BackgroundColor3 = Config.Colors.Secondary
    DropdownFrame.BorderSizePixel = 0
    DropdownFrame.Size = UDim2.new(1, 0, 0, 35)
    DropdownFrame.ClipsDescendants = true
    
    local DropdownCorner = Instance.new("UICorner")
    DropdownCorner.CornerRadius = UDim.new(0, 6)
    DropdownCorner.Parent = DropdownFrame
    
    local DropdownLabel = Instance.new("TextLabel")
    DropdownLabel.Parent = DropdownFrame
    DropdownLabel.BackgroundTransparency = 1
    DropdownLabel.Size = UDim2.new(0.5, -10, 1, 0)
    DropdownLabel.Position = UDim2.new(0, 15, 0, 0)
    DropdownLabel.Font = Enum.Font.Gotham
    DropdownLabel.Text = text
    DropdownLabel.TextColor3 = Config.Colors.Text
    DropdownLabel.TextSize = 14
    DropdownLabel.TextXAlignment = Enum.TextXAlignment.Left
    
    local DropdownButton = Instance.new("TextButton")
    DropdownButton.Parent = DropdownFrame
    DropdownButton.BackgroundColor3 = Config.Colors.Primary
    DropdownButton.BorderSizePixel = 0
    DropdownButton.Size = UDim2.new(0.5, -20, 0, 25)
    DropdownButton.Position = UDim2.new(0.5, 5, 0, 5)
    DropdownButton.Font = Enum.Font.Gotham
    DropdownButton.Text = default or "Select..."
    DropdownButton.TextColor3 = Config.Colors.Text
    DropdownButton.TextSize = 12
    DropdownButton.TextXAlignment = Enum.TextXAlignment.Left
    DropdownButton.TextXOffset = 10
    
    local DropdownButtonCorner = Instance.new("UICorner")
    DropdownButtonCorner.CornerRadius = UDim.new(0, 4)
    DropdownButtonCorner.Parent = DropdownButton
    
    local DropdownArrow = Instance.new("TextLabel")
    DropdownArrow.Parent = DropdownButton
    DropdownArrow.BackgroundTransparency = 1
    DropdownArrow.Size = UDim2.new(0, 20, 1, 0)
    DropdownArrow.Position = UDim2.new(1, -25, 0, 0)
    DropdownArrow.Font = Enum.Font.GothamBold
    DropdownArrow.Text = "‚ñº"
    DropdownArrow.TextColor3 = Config.Colors.TextSecondary
    DropdownArrow.TextSize = 10
    
    local DropdownList = Instance.new("ScrollingFrame")
    DropdownList.Parent = DropdownFrame
    DropdownList.BackgroundColor3 = Config.Colors.Primary
    DropdownList.BorderSizePixel = 0
    DropdownList.Size = UDim2.new(0.5, -20, 0, 0)
    DropdownList.Position = UDim2.new(0.5, 5, 0, 30)
    DropdownList.Visible = false
    DropdownList.ScrollBarThickness = 4
    DropdownList.ScrollBarImageColor3 = Config.Colors.Accent
    DropdownList.CanvasSize = UDim2.new(0, 0, 0, 0)
    
    local DropdownListCorner = Instance.new("UICorner")
    DropdownListCorner.CornerRadius = UDim.new(0, 4)
    DropdownListCorner.Parent = DropdownList
    
    local DropdownListLayout = Instance.new("UIListLayout")
    DropdownListLayout.Parent = DropdownList
    DropdownListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    
    local isOpen = false
    local currentValue = default
    
    local function ToggleDropdown()
        isOpen = not isOpen
        
        if isOpen then
            local listHeight = math.min(#options * 25, 150)
            DropdownList.Size = UDim2.new(0.5, -20, 0, listHeight)
            DropdownList.Visible = true
            DropdownFrame.Size = UDim2.new(1, 0, 0, 35 + listHeight + 5)
            
            TweenService:Create(DropdownArrow, Config.Animations.Fast, {
                Rotation = 180
            }):Play()
        else
            DropdownList.Visible = false
            DropdownFrame.Size = UDim2.new(1, 0, 0, 35)
            
            TweenService:Create(DropdownArrow, Config.Animations.Fast, {
                Rotation = 0
            }):Play()
        end
        
        -- Update content size
        ContentScrollFrame.CanvasSize = UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y)
    end
    
    DropdownButton.MouseButton1Click:Connect(ToggleDropdown)
    
    -- Create option buttons
    for i, option in ipairs(options) do
        local OptionButton = Instance.new("TextButton")
        OptionButton.Parent = DropdownList
        OptionButton.BackgroundColor3 = Config.Colors.Secondary
        OptionButton.BorderSizePixel = 0
        OptionButton.Size = UDim2.new(1, 0, 0, 25)
        OptionButton.Font = Enum.Font.Gotham
        OptionButton.Text = option
        OptionButton.TextColor3 = Config.Colors.Text
        OptionButton.TextSize = 12
        OptionButton.TextXAlignment = Enum.TextXAlignment.Left
        OptionButton.TextXOffset = 10
        
        OptionButton.MouseButton1Click:Connect(function()
            currentValue = option
            DropdownButton.Text = option
            ToggleDropdown()
            
            if callback then
                callback(option)
            end
        end)
        
        OptionButton.MouseEnter:Connect(function()
            TweenService:Create(OptionButton, Config.Animations.Fast, {
                BackgroundColor3 = Config.Colors.Border
            }):Play()
        end)
        
        OptionButton.MouseLeave:Connect(function()
            TweenService:Create(OptionButton, Config.Animations.Fast, {
                BackgroundColor3 = Config.Colors.Secondary
            }):Play()
        end)
    end
    
    -- Update canvas size
    DropdownList.CanvasSize = UDim2.new(0, 0, 0, DropdownListLayout.AbsoluteContentSize.Y)
    
    -- Update content size
    tab.Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        ContentScrollFrame.CanvasSize = UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y)
    end)
    
    return {Dropdown = DropdownFrame, SetValue = function(value) currentValue = value DropdownButton.Text = value end}
end

function Library:CreateLabel(tab, text, color)
    local LabelFrame = Instance.new("Frame")
    LabelFrame.Name = text
    LabelFrame.Parent = tab.Content
    LabelFrame.BackgroundColor3 = Config.Colors.Warning
    LabelFrame.BorderSizePixel = 0
    LabelFrame.Size = UDim2.new(1, 0, 0, 35)
    
    local LabelCorner = Instance.new("UICorner")
    LabelCorner.CornerRadius = UDim.new(0, 6)
    LabelCorner.Parent = LabelFrame
    
    local Label = Instance.new("TextLabel")
    Label.Parent = LabelFrame
    Label.BackgroundTransparency = 1
    Label.Size = UDim2.new(1, -20, 1, 0)
    Label.Position = UDim2.new(0, 10, 0, 0)
    Label.Font = Enum.Font.GothamBold
    Label.Text = text
    Label.TextColor3 = color or Config.Colors.Primary
    Label.TextSize = 14
    Label.TextXAlignment = Enum.TextXAlignment.Center
    
    -- Update content size
    tab.Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        ContentScrollFrame.CanvasSize = UDim2.new(0, 0, 0, ContentLayout.AbsoluteContentSize.Y)
    end)
    
    return {Label = LabelFrame, SetText = function(newText) Label.Text = newText end}
end

-- Control Button Functions
MinimizeButton.MouseButton1Click:Connect(function()
    ScreenGui.Enabled = false
end)

-- Close Confirmation Dialog
local function CreateConfirmDialog()
    local ConfirmGui = Instance.new("ScreenGui")
    ConfirmGui.Name = "ConfirmDialog"
    ConfirmGui.Parent = PlayerGui
    ConfirmGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ConfirmGui.DisplayOrder = 200
    
    local Overlay = Instance.new("Frame")
    Overlay.Parent = ConfirmGui
    Overlay.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    Overlay.BackgroundTransparency = 0.5
    Overlay.BorderSizePixel = 0
    Overlay.Size = UDim2.new(1, 0, 1, 0)
    
    local ConfirmFrame = Instance.new("Frame")
    ConfirmFrame.Parent = ConfirmGui
    ConfirmFrame.BackgroundColor3 = Config.Colors.Primary
    ConfirmFrame.BorderSizePixel = 0
    ConfirmFrame.Size = UDim2.new(0, 350, 0, 150)
    ConfirmFrame.Position = UDim2.new(0.5, -175, 0.5, -75)
    
    local ConfirmCorner = Instance.new("UICorner")
    ConfirmCorner.CornerRadius = UDim.new(0, 12)
    ConfirmCorner.Parent = ConfirmFrame
    
    local ConfirmStroke = Instance.new("UIStroke")
    ConfirmStroke.Color = Config.Colors.Border
    ConfirmStroke.Thickness = 1
    ConfirmStroke.Parent = ConfirmFrame
    
    local ConfirmTitle = Instance.new("TextLabel")
    ConfirmTitle.Parent = ConfirmFrame
    ConfirmTitle.BackgroundTransparency = 1
    ConfirmTitle.Size = UDim2.new(1, 0, 0, 40)
    ConfirmTitle.Position = UDim2.new(0, 0, 0, 10)
    ConfirmTitle.Font = Enum.Font.GothamBold
    ConfirmTitle.Text = "Confirm Close"
    ConfirmTitle.TextColor3 = Config.Colors.Text
    ConfirmTitle.TextSize = 16
    
    local ConfirmText = Instance.new("TextLabel")
    ConfirmText.Parent = ConfirmFrame
    ConfirmText.BackgroundTransparency = 1
    ConfirmText.Size = UDim2.new(1, -20, 0, 30)
    ConfirmText.Position = UDim2.new(0, 10, 0, 50)
    ConfirmText.Font = Enum.Font.Gotham
    ConfirmText.Text = "Are you sure you want to close the hub?"
    ConfirmText.TextColor3 = Config.Colors.TextSecondary
    ConfirmText.TextSize = 14
    ConfirmText.TextWrapped = true
    
    local ButtonsFrame = Instance.new("Frame")
    ButtonsFrame.Parent = ConfirmFrame
    ButtonsFrame.BackgroundTransparency = 1
    ButtonsFrame.Size = UDim2.new(1, -20, 0, 40)
    ButtonsFrame.Position = UDim2.new(0, 10, 1, -50)
    
    local CancelButton = Instance.new("TextButton")
    CancelButton.Parent = ButtonsFrame
    CancelButton.BackgroundColor3 = Config.Colors.Secondary
    CancelButton.BorderSizePixel = 0
    CancelButton.Size = UDim2.new(0.45, 0, 1, 0)
    CancelButton.Position = UDim2.new(0, 0, 0, 0)
    CancelButton.Font = Enum.Font.Gotham
    CancelButton.Text = "Cancel"
    CancelButton.TextColor3 = Config.Colors.Text
    CancelButton.TextSize = 14
    
    local CancelCorner = Instance.new("UICorner")
    CancelCorner.CornerRadius = UDim.new(0, 6)
    CancelCorner.Parent = CancelButton
    
    local ConfirmButton = Instance.new("TextButton")
    ConfirmButton.Parent = ButtonsFrame
    ConfirmButton.BackgroundColor3 = Config.Colors.Error
    ConfirmButton.BorderSizePixel = 0
    ConfirmButton.Size = UDim2.new(0.45, 0, 1, 0)
    ConfirmButton.Position = UDim2.new(0.55, 0, 0, 0)
    ConfirmButton.Font = Enum.Font.Gotham
    ConfirmButton.Text = "Close"
    ConfirmButton.TextColor3 = Config.Colors.Text
    ConfirmButton.TextSize = 14
    
    local ConfirmButtonCorner = Instance.new("UICorner")
    ConfirmButtonCorner.CornerRadius = UDim.new(0, 6)
    ConfirmButtonCorner.Parent = ConfirmButton
    
    -- Animate in
    ConfirmFrame.Size = UDim2.new(0, 0, 0, 0)
    TweenService:Create(ConfirmFrame, Config.Animations.Bounce, {
        Size = UDim2.new(0, 350, 0, 150)
    }):Play()
    
    CancelButton.MouseButton1Click:Connect(function()
        ConfirmGui:Destroy()
    end)
    
    ConfirmButton.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
        ConfirmGui:Destroy()
    end)
    
    -- Hover effects
    CancelButton.MouseEnter:Connect(function()
        TweenService:Create(CancelButton, Config.Animations.Fast, {BackgroundColor3 = Config.Colors.Border}):Play()
    end)
    CancelButton.MouseLeave:Connect(function()
        TweenService:Create(CancelButton, Config.Animations.Fast, {BackgroundColor3 = Config.Colors.Secondary}):Play()
    end)
    
    ConfirmButton.MouseEnter:Connect(function()
        TweenService:Create(ConfirmButton, Config.Animations.Fast, {BackgroundColor3 = Color3.fromRGB(220, 50, 50)}):Play()
    end)
    ConfirmButton.MouseLeave:Connect(function()
        TweenService:Create(ConfirmButton, Config.Animations.Fast, {BackgroundColor3 = Config.Colors.Error}):Play()
    end)
end

CloseButton.MouseButton1Click:Connect(function()
    CreateConfirmDialog()
end)

-- Control button hover effects
MinimizeButton.MouseEnter:Connect(function()
    TweenService:Create(MinimizeButton, Config.Animations.Fast, {
        TextColor3 = Config.Colors.Accent,
        BackgroundTransparency = 0.9,
        BackgroundColor3 = Config.Colors.Accent
    }):Play()
end)

MinimizeButton.MouseLeave:Connect(function()
    TweenService:Create(MinimizeButton, Config.Animations.Fast, {
        TextColor3 = Config.Colors.Text,
        BackgroundTransparency = 1
    }):Play()
end)

CloseButton.MouseEnter:Connect(function()
    TweenService:Create(CloseButton, Config.Animations.Fast, {
        TextColor3 = Config.Colors.Error,
        BackgroundTransparency = 0.9,
        BackgroundColor3 = Config.Colors.Error
    }):Play()
end)

CloseButton.MouseLeave:Connect(function()
    TweenService:Create(CloseButton, Config.Animations.Fast, {
        TextColor3 = Config.Colors.Text,
        BackgroundTransparency = 1
    }):Play()
end)

-- Animate GUI entrance
MainFrame.Size = UDim2.new(0, 0, 0, 0)
Shadow.Size = UDim2.new(0, 0, 0, 0)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
Shadow.Position = UDim2.new(0.5, 0, 0.5, 0)

TweenService:Create(MainFrame, Config.Animations.Bounce, {
    Size = UDim2.new(0, 800, 0, 500),
    Position = UDim2.new(0.5, -400, 0.5, -250)
}):Play()

TweenService:Create(Shadow, Config.Animations.Bounce, {
    Size = UDim2.new(0, 810, 0, 510),
    Position = UDim2.new(0.5, -405, 0.5, -255)
}):Play()

-- Example Usage
spawn(function()
    wait(0.5) -- Wait for GUI to load
    
    -- Create example tabs
    local homeTab = Library:CreateTab("HOME", "üè†")
    local specialTab = Library:CreateTab("SPECIAL", "‚≠ê")
    local mainTab = Library:CreateTab("MAIN", "üéØ")
    local spawnerTab = Library:CreateTab("SPAWNER", "üé™")
    local destroyTab = Library:CreateTab("DESTROY", "üí•")
    local settingsTab = Library:CreateTab("SETTINGS", "‚öôÔ∏è")
    
    -- HOME Tab
    Library:CreateLabel(homeTab, "Welcome to Modern Hub!", Config.Colors.Text)
    Library:CreateButton(homeTab, "Test Button", function()
        print("Button clicked!")
    end)
    Library:CreateToggle(homeTab, "Enable Feature", false, function(value)
        print("Toggle:", value)
    end)
    
    -- SPECIAL Tab
    Library:CreateButton(specialTab, "Special Function", function()
        print("Special function executed!")
    end)
    Library:CreateSlider(specialTab, "Speed", 1, 100, 16, function(value)
        print("Speed set to:", value)
    end)
    
    -- MAIN Tab
    Library:CreateButton(mainTab, "Main Feature 1", function()
        print("Main feature 1 activated!")
    end)
    Library:CreateButton(mainTab, "Main Feature 2", function()
        print("Main feature 2 activated!")
    end)
    Library:CreateDropdown(mainTab, "Select Option", {"First", "Second", "Third", "Fourth", "Fifth"}, "First", function(value)
        print("Selected:", value)
    end)
    
    -- SPAWNER Tab
    Library:CreateLabel(spawnerTab, "SPAWNER SCRIPT", Config.Colors.Text)
    Library:CreateLabel(spawnerTab, "Make Sure to only Execute Dark Spawner 1√ó", Config.Colors.TextSecondary)
    Library:CreateButton(spawnerTab, "Dark Spawner [ Mobile Only ]", function()
        print("Dark Spawner executed!")
    end)
    Library:CreateToggle(spawnerTab, "ReModified v3.8 || Dark Spawner", true, function(value)
        print("ReModified:", value)
    end)
    Library:CreateToggle(spawnerTab, "Pet Placer v1.0 [ Not Animated ]", false, function(value)
        print("Pet Placer:", value)
    end)
    Library:CreateLabel(spawnerTab, "ALLOW GIFT PET [NEW]", Config.Colors.Error)
    Library:CreateToggle(spawnerTab, "Allow Gift Spawned Pets ^.^", false, function(value)
        print("Allow Gift Pets:", value)
    end)
    
    -- DESTROY Tab
    Library:CreateButton(destroyTab, "Destroy Function 1", function()
        print("Destroy function 1!")
    end)
    Library:CreateButton(destroyTab, "Destroy Function 2", function()
        print("Destroy function 2!")
    end)
    
    -- SETTINGS Tab
    Library:CreateTextBox(settingsTab, "Custom Text", "Type here...", function(text)
        print("Text entered:", text)
    end)
    Library:CreateSlider(settingsTab, "GUI Scale", 0.5, 2, 1, function(value)
        print("GUI Scale:", value)
    end)
    Library:CreateDropdown(settingsTab, "Theme", {"Dark", "Light", "Blue", "Purple"}, "Dark", function(value)
        print("Theme:", value)
    end)
end)

return Library
