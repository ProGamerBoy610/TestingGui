-- Roblox Script to stay at MaximGun location and keep trying to sit
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

-- Target position
local targetPosition = Vector3.new(-428.75, 28.07, -49040.91)
local hasReachedTarget = false

-- Function to check if VehicleSeat is loaded
local function checkForVehicleSeat()
    local baseplates = workspace:FindFirstChild("Baseplates")
    if not baseplates then return nil end
    
    local finalBasePlate = baseplates:FindFirstChild("FinalBasePlate")
    if not finalBasePlate then return nil end
    
    local outlawbase = finalBasePlate:FindFirstChild("Outlawbase")
    if not outlawbase then return nil end
    
    local turretSpot = outlawbase:FindFirstChild("TurretSpot")
    if not turretSpot then return nil end
    
    local maximGun = turretSpot:FindFirstChild("MaximGun")
    if not maximGun then return nil end
    
    local vehicleSeat = maximGun:FindFirstChild("VehicleSeat")
    return vehicleSeat
end

-- Function to try sitting in VehicleSeat (without teleporting)
local function trySitting()
    local vehicleSeat = checkForVehicleSeat()
    if vehicleSeat then
        -- Just try to sit, don't teleport
        vehicleSeat:Sit(humanoid)
        print("Attempting to sit in MaximGun VehicleSeat...")
        return true
    end
    return false
end

-- Function to teleport to target location (only once)
local function teleportToTarget()
    if hasReachedTarget then return end
    
    -- Direct teleport to target position
    humanoidRootPart.CFrame = CFrame.new(targetPosition)
    hasReachedTarget = true
    print("Teleported to target position, now staying here and trying to sit...")
    
    -- Wait a moment then try sitting
    wait(0.5)
    trySitting()
end

-- Main function
local function startScript()
    -- Initial tween to location
    tweenToTarget()
    
    -- Continuous loop to try sitting (only after reaching target)
    spawn(function()
        while true do
            wait(2) -- Wait 2 seconds between attempts
            
            if hasReachedTarget then
                -- Check if player is already in a seat
                if humanoid.Sit then
                    print("Player is seated in MaximGun!")
                else
                    print("Player not seated, trying to sit...")
                    trySitting()
                end
            end
        end
    end)
end

-- Execute the function
startScript()
