local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

local lp = Players.LocalPlayer
local fakeDead = false

-- Function to trigger fake death
local function fakeDeath()
    local char = lp.Character or lp.CharacterAdded:Wait()
    local hum = char:FindFirstChildOfClass("Humanoid")
    if not hum then return end

    fakeDead = true
    hum:ChangeState(Enum.HumanoidStateType.Physics)
    hum.PlatformStand = true

    for _, part in ipairs(char:GetDescendants()) do
        if part:IsA("BasePart") then
            part.Anchored = false
            part.Velocity = Vector3.new(math.random(-5,5), 15, math.random(-5,5))
        end
    end

    print("[ðŸ’€] Fake death activated.")
end

-- Function to recover
local function recover()
    local char = lp.Character or lp.CharacterAdded:Wait()
    local hum = char:FindFirstChildOfClass("Humanoid")
    if not hum then return end

    fakeDead = false
    hum.PlatformStand = false
    hum:ChangeState(Enum.HumanoidStateType.GettingUp)

    print("[âœ…] Recovered from fake death.")
end

-- Start fake death automatically
fakeDeath()

-- Auto recover when movement key is pressed
UserInputService.InputBegan:Connect(function(input, gpe)
    if not gpe and fakeDead then
        local moveKeys = {
            Enum.KeyCode.W,
            Enum.KeyCode.A,
            Enum.KeyCode.S,
            Enum.KeyCode.D,
            Enum.KeyCode.Space
        }
        if table.find(moveKeys, input.KeyCode) then
            recover()
        end
    end
end)
