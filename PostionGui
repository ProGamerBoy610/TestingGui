local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local lp = Players.LocalPlayer

local fakeDead = false

-- âœ… Fake Death Function
local function fakeDeath()
    local char = lp.Character or lp.CharacterAdded:Wait()
    local hum = char:FindFirstChildOfClass("Humanoid")
    if not hum then return end

    fakeDead = true
    hum:ChangeState(Enum.HumanoidStateType.Physics)
    hum.PlatformStand = true

    for _, part in ipairs(char:GetDescendants()) do
        if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
            part.Anchored = false
            part.Velocity = Vector3.new(math.random(-5,5), 15, math.random(-5,5))
        end
    end

    print("[ðŸ’€] Fake death activated.")
end

-- âœ… Recover Function
local function recover()
    local char = lp.Character
    if not char then return end
    local hum = char:FindFirstChildOfClass("Humanoid")
    if not hum then return end

    fakeDead = false
    hum.PlatformStand = false
    hum:ChangeState(Enum.HumanoidStateType.GettingUp)

    print("[âœ…] Recovered from fake death.")
end

-- âœ… Detect Mobile Jump or Joystick Movement
UserInputService.InputBegan:Connect(function(input, gpe)
    if gpe or not fakeDead then return end

    if input.UserInputType == Enum.UserInputType.Touch or input.UserInputType == Enum.UserInputType.Gamepad1 then
        recover()
    elseif input.KeyCode == Enum.KeyCode.W or
           input.KeyCode == Enum.KeyCode.A or
           input.KeyCode == Enum.KeyCode.S or
           input.KeyCode == Enum.KeyCode.D or
           input.KeyCode == Enum.KeyCode.Space then
        recover()
    end
end)

-- âœ… Freeze if Actually Dead (Health = 0)
RunService.Heartbeat:Connect(function()
    local char = lp.Character
    if not char then return end
    local hum = char:FindFirstChildOfClass("Humanoid")
    if hum and hum.Health <= 0 then
        hum.PlatformStand = true
        for _, part in ipairs(char:GetDescendants()) do
            if part:IsA("BasePart") then
                part.Anchored = true
                part.Velocity = Vector3.zero
            end
        end
    end
end)

-- ðŸš€ Trigger Fake Death Immediately
fakeDeath()
