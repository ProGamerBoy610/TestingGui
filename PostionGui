local Players = game:GetService("Players")
local lp = Players.LocalPlayer

local function getSheriff()
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= lp and plr.Character and plr.Character:FindFirstChild("Gun") then
            return plr
        end
    end
    return nil
end

local function waitForGun()
    while true do
        local gun = workspace:FindFirstChild("GunDrop")
        if gun then
            return gun
        end
        task.wait(0.1)
    end
end

local function tpToGun(gun)
    local char = lp.Character or lp.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")
    hrp.CFrame = gun.CFrame + Vector3.new(0, 2, 0)
    print("[🔫] Teleported to dropped gun.")
end

-- Main Loop
task.spawn(function()
    while true do
        local sheriff = getSheriff()
        if sheriff then
            local hum = sheriff.Character:FindFirstChildOfClass("Humanoid")
            if hum and hum.Health <= 0 then
                print("[☠️] Sheriff died, waiting for gun...")
                local gun = waitForGun()
                task.wait(0.1)
                tpToGun(gun)
                break
            end
        end
        task.wait(0.5)
    end
end)
